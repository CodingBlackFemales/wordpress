!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.moment}()},function(e,t,o){var n=o(10),a=o(11),r=o(12),i=o(14);e.exports=function(e,t){return n(e)||a(e,t)||r(e,t)||i()}},function(e,t){!function(){e.exports=this.wp.date}()},function(e,t){!function(){e.exports=this.wp.hooks}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return o}}},function(e,t,o){var n=o(13);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,o){"use strict";o.r(t),o.d(t,"isBuddyBossInCategories",(function(){return O})),o.d(t,"getMeetingBlocks",(function(){return g})),o.d(t,"getWebinarBlocks",(function(){return v}));var n=o(5),a=o.n(n),r=o(1),i=o(0),c=o(8),s=o(9),b=o(6),d=o(2),l=o(7),u=o(3),p=o(4),m=o.n(p),_=function(e){return new Promise((function(t,o){wp.ajax.send("zoom_meeting_sync",{data:e,success:function(e){t(e)},error:function(e){o(e)}})}))},y=function(e){return new Promise((function(t,o){wp.ajax.send("zoom_webinar_sync",{data:e,success:function(e){t(e)},error:function(e){o(e)}})}))};function j(e){var t=e.options,o=e.setTimezone,n=e.timezone,c=e.clientId,s=Object(r.useState)(n),b=a()(s,2),l=b[0],u=b[1],p=Object(r.useState)(t),m=a()(p,2),_=m[0],y=m[1],j=Object(r.useState)(!1),O=a()(j,2),f=O[0],g=O[1],v=Object(r.useRef)(null),h=Object(r.useRef)(null);return Object(r.useEffect)((function(){function e(e){h.current&&!h.current.contains(e.target)&&g(!1)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[h]),Object(r.useEffect)((function(){if(f){var e=document.querySelector("#block-"+c+" .Select_suggestions-list"),t=e.querySelector(".active");t&&(e.scrollTop=t.offsetTop-70)}}),[f]),Object(r.createElement)("div",{className:"select_main",ref:h},Object(r.createElement)("div",{className:"select_option",onClick:function(){return y(t),void g(!0)}},Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Timezone","buddyboss-pro"),value:l,options:t,onChange:o,className:"bb_inline_selectBox"})),f&&Object(r.createElement)("div",{className:"Select_suggestions-wrapper"},Object(r.createElement)(d.TextControl,{onChange:function(e){return function(e){if(""!==e){var o=t.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())}));y(o)}else y(t)}(e)},label:Object(i.__)("Search timezone","buddyboss-pro"),hideLabelFromVision:!0,autoComplete:"off"}),Object(r.createElement)("ul",{className:"Select_suggestions-list",ref:v},_.length?_.map((function(e){return Object(r.createElement)("li",{key:e.value,onClick:function(){return function(e){u(e),o(e),g(!1)}(e.value)},className:"Select_suggestions-list-item ".concat(l===e.value?"active":"")},e.label)})):Object(r.createElement)("li",{className:"Select_suggestions-list-item no-result"},Object(i.__)("No results found","buddyboss-pro")))))}var O=function(){var e=wp.blocks.getCategories();for(var t in e)if("buddyboss"===e[t].slug)return!0;return!1},f=new Date(bpZoomMeetingBlock.wp_date_time);f.setMinutes(f.getMinutes()+(60-f.getMinutes())),Object(s.registerBlockType)("bp-zoom-meeting/create-meeting",{title:Object(i.__)("Zoom Meeting","buddyboss-pro"),description:Object(i.__)("Create meeting in Zoom","buddyboss-pro"),icon:"video-alt2",category:O()?"buddyboss":"common",keywords:[Object(i.__)("zoom","buddyboss-pro"),Object(i.__)("meeting","buddyboss-pro")],supports:{html:!1,reusable:!1},attributes:{id:{type:"number",default:""},meetingId:{type:"number",default:""},hostId:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_id?bpZoomMeetingBlock.default_host_id:""},hostDisplayName:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_user?bpZoomMeetingBlock.default_host_user:""},alt_hosts:{type:"string",default:""},title:{type:"string",default:""},description:{type:"string",default:""},startDate:{type:"string",default:m()(f).format("YYYY-MM-DD HH:mm:ss")},duration:{type:"string",default:"30"},timezone:{type:"string",default:void 0!==bpZoomMeetingBlock.wp_timezone?bpZoomMeetingBlock.wp_timezone:""},password:{type:"string",default:""},registration:{type:"boolean",default:!1},registration_type:{type:"number",default:1},hostVideo:{type:"boolean",default:!1},participantsVideo:{type:"boolean",default:!1},joinBeforeHost:{type:"boolean",default:!1},muteParticipants:{type:"boolean",default:!1},waitingRoom:{type:"boolean",default:!1},authentication:{type:"boolean",default:!1},autoRecording:{type:"string",default:"none"},recurring:{type:"boolean",default:!1},recurrence:{type:"number",default:1},repeat_interval:{type:"number",default:1},end_time_select:{type:"string",default:"date"},end_times:{type:"number",default:7},end_date_time:{type:"string",default:m()((new Date).setDate(new Date(bpZoomMeetingBlock.wp_date_time).getDate()+6)).format("YYYY-MM-DD HH:mm:ss")},weekly_days:{type:"array",default:["4"]},monthly_occurs_on:{type:"string",default:"day"},monthly_day:{type:"number",default:1},monthly_week:{type:"number",default:1},monthly_week_day:{type:"number",default:1},occurrences:{type:"array",default:[]},current_occurrence:{type:"object",default:{}},occurrence_edit:{type:"boolean",default:!1},current_occurrence_start_time:{type:"string",default:""},current_occurrence_duration:{type:"number",default:0},meetingFormType:{type:"string",default:""},external_meeting:{type:"boolean",default:!1}},edit:function(e){var t=e.clientId,o=e.setAttributes,n=void 0!==bpZoomMeetingBlock.default_host_user_type?bpZoomMeetingBlock.default_host_user_type:1,s=e.attributes,l=s.meetingId,p=(s.hostId,s.hostDisplayName),y=s.title,O=s.description,f=s.startDate,g=s.duration,v=s.timezone,h=s.password,w=s.registration,k=s.registration_type,D=s.hostVideo,C=s.participantsVideo,E=s.joinBeforeHost,z=s.muteParticipants,M=s.waitingRoom,x=s.authentication,B=s.autoRecording,Y=s.meetingFormType,S=s.alt_hosts,T=s.external_meeting,P=s.recurring,N=s.recurrence,A=s.repeat_interval,U=s.end_times,H=s.end_date_time,Z=s.end_time_select,I=s.weekly_days,F=s.monthly_occurs_on,R=s.monthly_day,L=s.monthly_week,W=s.monthly_week_day,V=s.occurrences,q=s.current_occurrence,Q=s.occurrence_edit,$=s.current_occurrence_start_time,G=s.current_occurrence_duration,J=[],K=Object(i.__)("day","buddyboss-pro"),X=new Date(f),ee=new Date,te=function(e){var t=new RegExp("^\\d+$");""!==e&&t.test(e)&&(e=parseInt(e.toString().replace(/\s/g,""))),o({meetingId:e})},oe=function(e){o({hostId:e})},ne=function(e){o({title:e})},ae=function(e){o({description:e})},re=function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e);if(t.getTime()<n.getTime()){o({startDate:e});var a=new Date(H);if(n.getTime()>=a.getTime()){var r=new Date(e);1===N?(r.setDate(r.getDate()+6*A),we(m()(r).format("YYYY-MM-DD HH:mm:ss"))):2===N?(r.setDate(r.getDate()+7*A*6),we(m()(r).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(r.setMonth(r.getMonth()+6*A),we(m()(r).format("YYYY-MM-DD HH:mm:ss")))}}},ie=function(e){o({duration:e})},ce=function(e){o({timezone:e});var t=new Date((new Date).toLocaleString("en-US",{timeZone:e})),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear(),i=""+t.getHours(),c=""+t.getMinutes(),s=""+t.getSeconds();n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),c.length<2&&(c="0"+c),s.length<2&&(s="0"+s),bpZoomMeetingBlock.wp_date_time=[r,n,a].join("-")+"T"+[i,c,s].join(":");var b=new Date(f);0===l.length&&b<t&&o({startDate:bpZoomMeetingBlock.wp_date_time})},se=function(e){o({password:e})},be=function(e){o({registration:e})},de=function(e){o({registration_type:parseInt(e)})},le=function(e){o({hostVideo:e})},ue=function(e){o({participantsVideo:e})},pe=function(e){o({joinBeforeHost:e})},me=function(e){o({muteParticipants:e})},_e=function(e){o({waitingRoom:e})},ye=function(e){o({authentication:e})},je=function(e){o({autoRecording:e})},Oe=function(e){o({meetingFormType:e})},fe=function(e){o({recurring:e})},ge=function(e){o({recurrence:parseInt(e)}),1==e?(ee.setDate(X.getDate()+6*A),we(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):2==e?(ee.setDate(X.getDate()+7*A*6),we(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):3==e&&(ee.setMonth(X.getMonth()+6*A),we(m()(ee).format("YYYY-MM-DD HH:mm:ss")))},ve=function(e){o({repeat_interval:e}),1===N?(ee.setDate(X.getDate()+6*e),we(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):2===N?(ee.setDate(X.getDate()+7*e*6),we(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(ee.setMonth(X.getMonth()+6*e),we(m()(ee).format("YYYY-MM-DD HH:mm:ss")))},he=function(e){o({end_times:parseInt(e)})},we=function(e){var t=new Date(f),n=new Date(e);t.getTime()<n.getTime()&&o({end_date_time:e})},ke=function(e){var t=new Date,n=new Date(e);t.getTime()<n.getTime()&&o({current_occurrence_start_time:e})},De=function(e){o({current_occurrence_duration:e})},Ce=function(e){o({end_time_select:e})},Ee=function(e){o({weekly_days:e})},ze=function(e){o({monthly_occurs_on:e})},Me=function(e){o({monthly_day:parseInt(e)})},xe=function(e){o({monthly_week:e})},Be=function(e){o({monthly_week_day:parseInt(e)})},Ye=function(e){for(var t in o({occurrences:e}),e){var n=new Date(bpZoomMeetingBlock.wp_date_time),a=new Date(e[t].start_time);if(n.getTime()<a.getTime()&&"deleted"!==e[t].status){re(e[t].start_time);break}}},Se=function(e){o({occurrence_edit:e})},Te=function(e){o({alt_hosts:e})},Pe=Object(b.__experimentalGetSettings)(),Ne=Object(r.useState)(!1),Ae=a()(Ne,2),Ue=Ae[0],He=Ae[1],Ze=Object(r.useState)(!1),Ie=a()(Ze,2),Fe=Ie[0],Re=Ie[1],Le=(Pe.formats.datetime,[]);if(Le=2==n?[{label:Object(i.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(i.__)("Cloud","buddyboss-pro"),value:"cloud"},{label:Object(i.__)("Local","buddyboss-pro"),value:"local"}]:[{label:Object(i.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(i.__)("Local","buddyboss-pro"),value:"local"}],1===N){K=Object(i.__)("day","buddyboss-pro"),J=[];for(var We=1;We<=15;We++)J.push({label:We,value:We})}else if(2===N){K=Object(i.__)("week","buddyboss-pro"),J=[];for(var Ve=1;Ve<=12;Ve++)J.push({label:Ve,value:Ve})}else if(3===N){K=Object(i.__)("month","buddyboss-pro"),J=[];for(var qe=1;qe<=3;qe++)J.push({label:qe,value:qe})}var Qe=function(e){var t;if(Object(u.isUndefined)(e.host_name)||(t=e.host_name,o({hostDisplayName:t})),Object(u.isUndefined)(e.host_email)||oe(e.host_email),!Object(u.isUndefined)(e.meeting)){var n=e.meeting;if(Object(u.isUndefined)(n.id)||te(n.id),Object(u.isUndefined)(n.host_id)||oe(n.host_id),Object(u.isUndefined)(n.topic)||ne(n.topic),Object(u.isUndefined)(n.agenda)||ae(n.agenda),Object(u.isUndefined)(n.timezone)||ce(n.timezone),Object(u.isUndefined)(n.start_time)||o({startDate:n.start_time}),Object(u.isUndefined)(n.duration)?!Object(u.isUndefined)(n.occurrences)&&n.occurrences.length&&ie(n.occurrences[0].duration):ie(n.duration),Object(u.isUndefined)(n.password)||se(n.password),!Object(u.isUndefined)(n.type)&&[3,8].includes(n.type)?fe(!0):fe(!1),!Object(u.isUndefined)(n.occurrences)&&n.occurrences.length&&Ye(n.occurrences),!Object(u.isUndefined)(n.recurrence)){var a=n.recurrence;Object(u.isUndefined)(a.type)||ge(a.type),Object(u.isUndefined)(a.repeat_interval)||ve(a.repeat_interval),Object(u.isUndefined)(a.end_times)||(he(a.end_times),Ce("times")),Object(u.isUndefined)(a.end_date_time)||(we(a.end_date_time),Ce("date")),Object(u.isUndefined)(a.weekly_days)||Ee(a.weekly_days.split(",")),Object(u.isUndefined)(a.monthly_day)||(Me(a.monthly_day),ze("day")),Object(u.isUndefined)(a.monthly_week)||(xe(a.monthly_week),ze("week")),Object(u.isUndefined)(a.monthly_week_day)||(Be(a.monthly_week_day),ze("week"))}if(!Object(u.isUndefined)(n.settings)){var r=n.settings;Object(u.isUndefined)(r.alternative_hosts)||Te(r.alternative_hosts),Object(u.isUndefined)(r.approval_type)||0!=r.approval_type||be(!0),Object(u.isUndefined)(r.registration_type)||de(r.registration_type),Object(u.isUndefined)(r.host_video)||le(r.host_video),Object(u.isUndefined)(r.participant_video)||ue(r.participant_video),Object(u.isUndefined)(r.join_before_host)||pe(r.join_before_host),Object(u.isUndefined)(r.mute_upon_entry)||me(r.mute_upon_entry),Object(u.isUndefined)(r.waiting_room)||_e(r.waiting_room),Object(u.isUndefined)(r.meeting_authentication)||ye(r.meeting_authentication),Object(u.isUndefined)(r.auto_recording)||je(r.auto_recording)}}};return Object(r.createElement)(r.Fragment,null,""===Y?Object(r.createElement)(d.Placeholder,{icon:"video-alt2",className:"bb-input-container meeting_block_title",label:Object(i.__)("Zoom Meeting","buddyboss-pro"),instructions:Object(i.__)("Create meeting or add existing meeting.","buddyboss-pro")},Object(r.createElement)(d.Button,{isSecondary:!0,onClick:function(){Oe("create")}},Object(i.__)("Create Meeting","buddyboss-pro")),Object(r.createElement)(d.Button,{isSecondary:!0,onClick:function(){Oe("existing")}},Object(i.__)("Add Existing Meeting","buddyboss-pro"))):"","existing"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.Placeholder,{icon:"video-alt2",className:"bb-meeting-id-input-container",label:Object(i.__)("Add Existing Meeting","buddyboss-pro")},Object(r.createElement)(d.TextControl,{label:Object(i.__)("Meeting ID","buddyboss-pro"),value:l,className:"components-placeholder__input bb-meeting-id-wrap",placeholder:Object(i.__)("Enter meeting ID without spaces…","buddyboss-pro"),onChange:te}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-id":l};_(n).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i>',wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Meeting Synced.","buddyboss-pro"),{isDismissible:!0}),Qe(e),Oe("create"),o({external_meeting:!0});var n=wp.data.select("core/editor");n.isEditedPostSaveable()&&(!n.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(n.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(i.__)("Save","buddyboss-pro")),l<1||""===l?Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){Oe("")}},Object(i.__)("Cancel","buddyboss-pro")):""))):"","create"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.Placeholder,{icon:"video-alt2",label:T?Object(i.__)("Existing Meeting","buddyboss-pro"):Object(i.__)("Create Meeting","buddyboss-pro"),className:"bp-meeting-block-create"},l>1||""!==l?Object(r.createElement)(d.Button,{isLink:!0,onClick:function(e){var t=e.currentTarget;t.innerHTML='<i class="bb-icon-l bb-icon-spinner animate-spin"></i> '+Object(i.__)("Sync","buddyboss-pro"),t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-id":l};_(o).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+Object(i.__)("Sync","buddyboss-pro"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Meeting Synced.","buddyboss-pro"),{isDismissible:!0}),Qe(e),Oe("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+Object(i.__)("Sync","buddyboss-pro"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(r.createElement)("i",{className:"bb-icon-l bb-icon-bolt"})," ",Object(i.__)("Sync","buddyboss-pro")):"",Object(r.createElement)(d.TextControl,{label:"",type:"hidden",value:l}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Title","buddyboss-pro"),value:y,onChange:ne}),Object(r.createElement)(d.BaseControl,{label:Object(i.__)("When","buddyboss-pro"),className:"bb-meeting-time-wrap"},Object(r.createElement)("time",{dateTime:Object(b.date)("c",f)},Object(r.createElement)(d.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return He((function(e){return!e}))}},m()(f).format("MMMM DD, YYYY h:mm a")),Ue&&Object(r.createElement)(d.Popover,{onClose:He.bind(null,!1)},Object(r.createElement)(d.DateTimePicker,{currentDate:f,onChange:re,is12Hour:!0})))),Object(r.createElement)("div",null,Object(r.createElement)(j,{timezone:v,options:bpZoomMeetingBlock.timezones,setTimezone:ce,clientId:t})),Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Auto Recording","buddyboss-pro"),value:B,options:Le,onChange:je,className:"bb_inline_selectBox"}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{className:"submit-meeting",isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":l,"bp-zoom-meeting-start-date":f,"bp-zoom-meeting-timezone":v,"bp-zoom-meeting-duration":g,"bp-zoom-meeting-password":h,"bp-zoom-meeting-recording":B,"bp-zoom-meeting-alt-host-ids":S,"bp-zoom-meeting-title":y,"bp-zoom-meeting-description":O,"bp-zoom-meeting-type":2};P&&(1===N?("date"===Z?o["bp-zoom-meeting-end-date-time"]=H:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=1,o["bp-zoom-meeting-end-time-select"]=Z,o["bp-zoom-meeting-repeat-interval"]=A,o["bp-zoom-meeting-type"]=8):2===N?(I&&(o["bp-zoom-meeting-weekly-days"]=I),"date"===Z?o["bp-zoom-meeting-end-date-time"]=H:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=2,o["bp-zoom-meeting-end-time-select"]=Z,o["bp-zoom-meeting-repeat-interval"]=A,o["bp-zoom-meeting-type"]=8):3===N?("day"===F?o["bp-zoom-meeting-monthly-day"]=R:"week"===F&&(o["bp-zoom-meeting-monthly-week"]=L,o["bp-zoom-meeting-monthly-week-day"]=W),"date"===Z?o["bp-zoom-meeting-end-date-time"]=H:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=3,o["bp-zoom-meeting-monthly-occurs-on"]=F,o["bp-zoom-meeting-end-time-select"]=Z,o["bp-zoom-meeting-repeat-interval"]=A,o["bp-zoom-meeting-type"]=8):o["bp-zoom-meeting-type"]=3),w&&(o["bp-zoom-meeting-registration"]=1,8===o["bp-zoom-meeting-type"]&&(o["bp-zoom-meeting-registration-type"]=k)),E&&(o["bp-zoom-meeting-join-before-host"]=1),D&&(o["bp-zoom-meeting-host-video"]=1),C&&(o["bp-zoom-meeting-participants-video"]=1),z&&(o["bp-zoom-meeting-mute-participants"]=1),M&&(o["bp-zoom-meeting-waiting-room"]=1),x&&(o["bp-zoom-meeting-authentication"]=1),wp.ajax.send("zoom_meeting_block_add",{data:o,success:function(e){e.meeting.id&&te(e.meeting.id),void 0!==e.meeting.occurrences&&e.meeting.occurrences.length&&Ye(e.meeting.occurrences),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Meeting Updated.","buddyboss-pro"),{isDismissible:!0}),Oe("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Save Meeting","buddyboss-pro")),l<1||""===l?Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){Oe("")}},Object(i.__)("Cancel","buddyboss-pro")):Object(r.createElement)(d.Button,{isDestructive:!0,onClick:function(e){var o=e.target;if(confirm("Are you sure you want to delete this meeting?","buddyboss-pro")){o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":l};wp.ajax.send("zoom_meeting_block_delete_meeting",{data:n,success:function(){wp.data.dispatch("core/block-editor").removeBlock(t),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Meeting Deleted.","buddyboss-pro"),{isDismissible:!0});var e=wp.data.select("core/editor");e.isEditedPostSaveable()&&(!e.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(e.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}}},Object(i.__)("Delete","buddyboss-pro"))))):"","create"===Y?Object(r.createElement)(c.InspectorControls,null,Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Settings","buddyboss-pro"),initialOpen:!0},Object(r.createElement)(d.TextareaControl,{label:Object(i.__)("Description (optional)","buddyboss-pro"),value:O,onChange:ae}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Passcode (optional)","buddyboss-pro"),onChange:se,value:h}),Object(r.createElement)(d.TextControl,{type:"number",label:Object(i.__)("Duration (minutes)","buddyboss-pro"),onChange:ie,value:g}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Default Host","buddyboss-pro"),type:"text",disabled:!0,value:p}),2==n?Object(r.createElement)(d.TextControl,{label:Object(i.__)("Alternative Hosts","buddyboss-pro"),onChange:Te,value:S,placeholder:Object(i.__)("Example: mary@company.com","buddyboss-pro"),help:Object(i.__)("Entered by email, comma separated. Each email added needs to match with a user in your Zoom account.","buddyboss-pro")}):"",Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Start video when host joins","buddyboss-pro"),checked:D,onChange:le,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Start video when participants join","buddyboss-pro"),checked:C,onChange:ue,className:"bb-checkbox-wrap"}),2==n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Require Registration","buddyboss-pro"),checked:w,onChange:be,className:"bb-checkbox-wrap"}),w&&P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.RadioControl,{selected:k,options:[{label:Object(i.__)("Attendees register once and can attend any of the occurrences","buddyboss-pro"),value:1},{label:Object(i.__)("Attendees need to register for each occurrence to attend","buddyboss-pro"),value:2},{label:Object(i.__)("Attendees register once and can choose one or more occurrences to attend","buddyboss-pro"),value:3}],onChange:de})):""):"",Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Enable join before host","buddyboss-pro"),checked:E,onChange:pe,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Mute participants upon entry","buddyboss-pro"),checked:z,onChange:me,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Enable waiting room","buddyboss-pro"),checked:M,onChange:_e,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Only authenticated users can join","buddyboss-pro"),checked:x,onChange:ye,className:"bb-checkbox-wrap"})),Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Recurring Options","buddyboss-pro"),initialOpen:!1},Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Recurring Meeting","buddyboss-pro"),checked:P,onChange:fe}),!0===P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Recurrence","buddyboss-pro"),value:N,options:[{label:Object(i.__)("Daily","buddyboss-pro"),value:1},{label:Object(i.__)("Weekly","buddyboss-pro"),value:2},{label:Object(i.__)("Monthly","buddyboss-pro"),value:3}],onChange:ge}),Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Repeat every","buddyboss-pro"),value:A,options:J,onChange:ve,help:K}),2===N?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Days","buddyboss-pro"),value:I,options:[{label:Object(i.__)("Sunday","buddyboss-pro"),value:1},{label:Object(i.__)("Monday","buddyboss-pro"),value:2},{label:Object(i.__)("Tuesday","buddyboss-pro"),value:3},{label:Object(i.__)("Wednesday","buddyboss-pro"),value:4},{label:Object(i.__)("Thursday","buddyboss-pro"),value:5},{label:Object(i.__)("Friday","buddyboss-pro"),value:6},{label:Object(i.__)("Saturday","buddyboss-pro"),value:7}],onChange:Ee,multiple:!0}):"",3===N?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Occures on","buddyboss-pro"),value:F,options:[{label:Object(i.__)("Day of the month","buddyboss-pro"),value:"day"},{label:Object(i.__)("Week of the month","buddyboss-pro"),value:"week"}],onChange:ze}),"day"===F?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Day","buddyboss-pro"),value:R,options:[{label:Object(i.__)("1","buddyboss-pro"),value:1},{label:Object(i.__)("2","buddyboss-pro"),value:2},{label:Object(i.__)("3","buddyboss-pro"),value:3},{label:Object(i.__)("4","buddyboss-pro"),value:4},{label:Object(i.__)("5","buddyboss-pro"),value:5},{label:Object(i.__)("6","buddyboss-pro"),value:6},{label:Object(i.__)("7","buddyboss-pro"),value:7},{label:Object(i.__)("8","buddyboss-pro"),value:8},{label:Object(i.__)("9","buddyboss-pro"),value:9},{label:Object(i.__)("10","buddyboss-pro"),value:10},{label:Object(i.__)("11","buddyboss-pro"),value:11},{label:Object(i.__)("12","buddyboss-pro"),value:12},{label:Object(i.__)("13","buddyboss-pro"),value:13},{label:Object(i.__)("14","buddyboss-pro"),value:14},{label:Object(i.__)("15","buddyboss-pro"),value:15},{label:Object(i.__)("16","buddyboss-pro"),value:16},{label:Object(i.__)("17","buddyboss-pro"),value:17},{label:Object(i.__)("18","buddyboss-pro"),value:18},{label:Object(i.__)("19","buddyboss-pro"),value:19},{label:Object(i.__)("20","buddyboss-pro"),value:20},{label:Object(i.__)("21","buddyboss-pro"),value:21},{label:Object(i.__)("22","buddyboss-pro"),value:22},{label:Object(i.__)("23","buddyboss-pro"),value:23},{label:Object(i.__)("24","buddyboss-pro"),value:24},{label:Object(i.__)("25","buddyboss-pro"),value:25},{label:Object(i.__)("26","buddyboss-pro"),value:26},{label:Object(i.__)("27","buddyboss-pro"),value:27},{label:Object(i.__)("28","buddyboss-pro"),value:28},{label:Object(i.__)("29","buddyboss-pro"),value:29},{label:Object(i.__)("30","buddyboss-pro"),value:30},{label:Object(i.__)("31","buddyboss-pro"),value:31}],onChange:Me,help:Object(i.__)("of the month","buddyboss-pro")}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{value:L,options:[{label:Object(i.__)("First","buddyboss-pro"),value:1},{label:Object(i.__)("Second","buddyboss-pro"),value:2},{label:Object(i.__)("Third","buddyboss-pro"),value:3},{label:Object(i.__)("Fourth","buddyboss-pro"),value:4},{label:Object(i.__)("Last","buddyboss-pro"),value:-1}],onChange:xe}),Object(r.createElement)(d.SelectControl,{value:W,options:[{label:Object(i.__)("Sunday","buddyboss-pro"),value:1},{label:Object(i.__)("Monday","buddyboss-pro"),value:2},{label:Object(i.__)("Tuesday","buddyboss-pro"),value:3},{label:Object(i.__)("Wednesday","buddyboss-pro"),value:4},{label:Object(i.__)("Thursday","buddyboss-pro"),value:5},{label:Object(i.__)("Friday","buddyboss-pro"),value:6},{label:Object(i.__)("Saturday","buddyboss-pro"),value:7}],onChange:Be,help:Object(i.__)("of the month","buddyboss-pro")}))):"",4!==N?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("End by","buddyboss-pro"),value:Z,options:[{label:Object(i.__)("Date","buddyboss-pro"),value:"date"},{label:Object(i.__)("Occurrences","buddyboss-pro"),value:"times"}],onChange:Ce}),"date"==Z?Object(r.createElement)("time",{dateTime:Object(b.date)("c",H)},Object(r.createElement)(d.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Re((function(e){return!e}))}},m()(H).format("MMMM DD, YYYY")),Fe&&Object(r.createElement)(d.Popover,{onClose:Re.bind(null,!1)},Object(r.createElement)(d.DatePicker,{currentDate:H,onChange:we}))):"","times"==Z?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("End After","buddyboss-pro"),value:U,help:Object(i.__)("occurences","buddyboss-pro"),options:[{label:Object(i.__)("1","buddyboss-pro"),value:1},{label:Object(i.__)("2","buddyboss-pro"),value:2},{label:Object(i.__)("3","buddyboss-pro"),value:3},{label:Object(i.__)("4","buddyboss-pro"),value:4},{label:Object(i.__)("5","buddyboss-pro"),value:5},{label:Object(i.__)("6","buddyboss-pro"),value:6},{label:Object(i.__)("7","buddyboss-pro"),value:7},{label:Object(i.__)("8","buddyboss-pro"),value:8},{label:Object(i.__)("9","buddyboss-pro"),value:9},{label:Object(i.__)("10","buddyboss-pro"),value:10},{label:Object(i.__)("11","buddyboss-pro"),value:11},{label:Object(i.__)("12","buddyboss-pro"),value:12},{label:Object(i.__)("13","buddyboss-pro"),value:13},{label:Object(i.__)("14","buddyboss-pro"),value:14},{label:Object(i.__)("15","buddyboss-pro"),value:15},{label:Object(i.__)("16","buddyboss-pro"),value:16},{label:Object(i.__)("17","buddyboss-pro"),value:17},{label:Object(i.__)("18","buddyboss-pro"),value:18},{label:Object(i.__)("19","buddyboss-pro"),value:19},{label:Object(i.__)("20","buddyboss-pro"),value:20}],onChange:he}):""):""):""),!0===P&&V.length?Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Occurrences","buddyboss-pro"),initialOpen:!1},V.map((function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e.start_time);return t.getTime()>n.getTime()||"deleted"===e.status?"":Object(r.createElement)(r.Fragment,{key:e.occurrence_id},Object(r.createElement)(d.__experimentalText,{as:"p"},m()(e.start_time).format("MMMM DD, YYYY h:mm a")),Object(r.createElement)(d.Button,{isLink:!0,className:"edit-occurrences-button",onClick:function(){var t;Se(!0),o({current_occurrence:t=e}),De(t.duration),ke(t.start_time)}},Object(i.__)("Edit","buddyboss-pro")),Object(r.createElement)(d.Button,{isLink:"true",className:"edit-occurrences-button",onClick:function(t){var o=t.target;if(!confirm(bpZoomMeetingBlock.delete_occurrence_confirm_str))return!1;o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":l,"bp-zoom-meeting-occurrence-id":e.occurrence_id};wp.ajax.send("zoom_meeting_block_delete_occurrence",{data:n,success:function(){Ye(V.filter((function(t){return t.occurrence_id!==e.occurrence_id}))),Se(!1),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Occurrence Deleted.","buddyboss-pro"),{isDismissible:!0});var t=wp.data.select("core/editor");t.isEditedPostSaveable()&&(!t.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(t.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Delete","buddyboss-pro")),Q&&q&&q.occurrence_id===e.occurrence_id?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.DateTimePicker,{is12Hour:!0,currentDate:$,onChange:ke}),Object(r.createElement)(d.TextControl,{type:"number",label:Object(i.__)("Duration (minutes)","buddyboss-pro"),onChange:De,value:G}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{isPrimary:!0,className:"submit-meeting",onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":l,"bp-zoom-meeting-occurrence-id":q.occurrence_id,"bp-zoom-meeting-start-time":$,"bp-zoom-meeting-timezone":v,"bp-zoom-meeting-duration":G,"bp-zoom-meeting-recording":B,"bp-zoom-meeting-alt-host-ids":S};E&&(o["bp-zoom-meeting-join-before-host"]=1),D&&(o["bp-zoom-meeting-host-video"]=1),C&&(o["bp-zoom-meeting-participants-video"]=1),z&&(o["bp-zoom-meeting-mute-participants"]=1),M&&(o["bp-zoom-meeting-waiting-room"]=1),x&&(o["bp-zoom-meeting-authentication"]=1),wp.ajax.send("zoom_meeting_block_update_occurrence",{data:o,success:function(){for(var e in V)if(V[e].occurrence_id===q.occurrence_id){V[e].duration=G,V[e].start_time=$;break}Ye(V),Se(!1),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Meeting Updated.","buddyboss-pro"),{isDismissible:!0});var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Save","buddyboss-pro")),Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){Se(!1)}},Object(i.__)("Cancel","buddyboss-pro")))):"")}))):""):"")}}),bpZoomMeetingBlock.webinar_enabled&&Object(s.registerBlockType)("bp-zoom-meeting/create-webinar",{title:Object(i.__)("Zoom Webinar","buddyboss-pro"),description:Object(i.__)("Create webinar in Zoom","buddyboss-pro"),icon:"video-alt2",category:O()?"buddyboss":"common",keywords:[Object(i.__)("zoom","buddyboss-pro"),Object(i.__)("webinar","buddyboss-pro")],supports:{html:!1,reusable:!1},attributes:{id:{type:"number",default:""},webinarId:{type:"number",default:""},hostId:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_id?bpZoomMeetingBlock.default_host_id:""},hostDisplayName:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_user?bpZoomMeetingBlock.default_host_user:""},alt_hosts:{type:"string",default:""},title:{type:"string",default:""},description:{type:"string",default:""},startDate:{type:"string",default:m()(f).format("YYYY-MM-DD HH:mm:ss")},duration:{type:"string",default:"30"},timezone:{type:"string",default:void 0!==bpZoomMeetingBlock.wp_timezone?bpZoomMeetingBlock.wp_timezone:""},password:{type:"string",default:""},registration:{type:"boolean",default:!1},registration_type:{type:"number",default:1},hostVideo:{type:"boolean",default:!1},panelistsVideo:{type:"boolean",default:!1},practiceSession:{type:"boolean",default:!1},onDemand:{type:"boolean",default:!1},authentication:{type:"boolean",default:!1},autoRecording:{type:"string",default:"none"},recurring:{type:"boolean",default:!1},recurrence:{type:"number",default:1},repeat_interval:{type:"number",default:1},end_time_select:{type:"string",default:"date"},end_times:{type:"number",default:7},end_date_time:{type:"string",default:m()((new Date).setDate(new Date(bpZoomMeetingBlock.wp_date_time).getDate()+6)).format("YYYY-MM-DD HH:mm:ss")},weekly_days:{type:"array",default:["4"]},monthly_occurs_on:{type:"string",default:"day"},monthly_day:{type:"number",default:1},monthly_week:{type:"number",default:1},monthly_week_day:{type:"number",default:1},occurrences:{type:"array",default:[]},current_occurrence:{type:"object",default:{}},occurrence_edit:{type:"boolean",default:!1},current_occurrence_start_time:{type:"string",default:""},current_occurrence_duration:{type:"number",default:0},webinarFormType:{type:"string",default:""},external_webinar:{type:"boolean",default:!1}},edit:function(e){var t=e.clientId,o=e.setAttributes,n=void 0!==bpZoomMeetingBlock.default_host_user_type?bpZoomMeetingBlock.default_host_user_type:1,s=void 0!==bpZoomMeetingBlock.private_webinar&&bpZoomMeetingBlock.private_webinar,l=e.attributes,p=l.webinarId,_=(l.hostId,l.hostDisplayName),O=l.title,f=l.description,g=l.startDate,v=l.duration,h=l.timezone,w=l.password,k=l.registration,D=l.registration_type,C=l.hostVideo,E=l.panelistsVideo,z=l.practiceSession,M=l.onDemand,x=l.authentication,B=l.autoRecording,Y=l.webinarFormType,S=l.alt_hosts,T=l.external_webinar,P=l.recurring,N=l.recurrence,A=l.repeat_interval,U=l.end_times,H=l.end_date_time,Z=l.end_time_select,I=l.weekly_days,F=l.monthly_occurs_on,R=l.monthly_day,L=l.monthly_week,W=l.monthly_week_day,V=l.occurrences,q=l.current_occurrence,Q=l.occurrence_edit,$=l.current_occurrence_start_time,G=l.current_occurrence_duration,J=[],K=Object(i.__)("day","buddyboss-pro"),X=new Date(g),ee=new Date,te=function(e){var t=new RegExp("^\\d+$");""!==e&&t.test(e)&&(e=parseInt(e.toString().replace(/\s/g,""))),o({webinarId:e})},oe=function(e){o({hostId:e})},ne=function(e){o({title:e})},ae=function(e){o({description:e})},re=function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e);if(t.getTime()<n.getTime()){o({startDate:e});var a=new Date(H);if(n.getTime()>=a.getTime()){var r=new Date(e);1===N?(r.setDate(r.getDate()+6*A),ve(m()(r).format("YYYY-MM-DD HH:mm:ss"))):2===N?(r.setDate(r.getDate()+7*A*6),ve(m()(r).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(r.setMonth(r.getMonth()+6*A),ve(m()(r).format("YYYY-MM-DD HH:mm:ss")))}}},ie=function(e){o({duration:e})},ce=function(e){o({timezone:e});var t=new Date((new Date).toLocaleString("en-US",{timeZone:e})),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear(),i=""+t.getHours(),c=""+t.getMinutes(),s=""+t.getSeconds();n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),c.length<2&&(c="0"+c),s.length<2&&(s="0"+s),bpZoomMeetingBlock.wp_date_time=[r,n,a].join("-")+"T"+[i,c,s].join(":");var b=new Date(g);0===p.length&&b<t&&o({startDate:bpZoomMeetingBlock.wp_date_time})},se=function(e){o({password:e})},be=function(e){o({registration:e})},de=function(e){o({registration_type:parseInt(e)})},le=function(e){o({hostVideo:e})},ue=function(e){o({panelistsVideo:e})},pe=function(e){o({practiceSession:e})},me=function(e){o({authentication:e})},_e=function(e){o({autoRecording:e})},ye=function(e){o({webinarFormType:e})},je=function(e){o({recurring:e})},Oe=function(e){o({recurrence:parseInt(e)}),1==e?(ee.setDate(X.getDate()+6*A),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):2==e?(ee.setDate(X.getDate()+7*A*6),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):3==e&&(ee.setMonth(X.getMonth()+6*A),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss")))},fe=function(e){o({repeat_interval:e}),1===N?(ee.setDate(X.getDate()+6*e),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):2===N?(ee.setDate(X.getDate()+7*e*6),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(ee.setMonth(X.getMonth()+6*e),ve(m()(ee).format("YYYY-MM-DD HH:mm:ss")))},ge=function(e){o({end_times:parseInt(e)})},ve=function(e){var t=new Date(g),n=new Date(e);t.getTime()<n.getTime()&&o({end_date_time:e})},he=function(e){var t=new Date,n=new Date(e);t.getTime()<n.getTime()&&o({current_occurrence_start_time:e})},we=function(e){o({current_occurrence_duration:e})},ke=function(e){o({end_time_select:e})},De=function(e){o({weekly_days:e})},Ce=function(e){o({monthly_occurs_on:e})},Ee=function(e){o({monthly_day:parseInt(e)})},ze=function(e){o({monthly_week:e})},Me=function(e){o({monthly_week_day:parseInt(e)})},xe=function(e){for(var t in o({occurrences:e}),e){var n=new Date(bpZoomMeetingBlock.wp_date_time),a=new Date(e[t].start_time);if(n.getTime()<a.getTime()&&"deleted"!==e[t].status){re(e[t].start_time);break}}},Be=function(e){o({occurrence_edit:e})},Ye=function(e){o({alt_hosts:e})},Se=Object(b.__experimentalGetSettings)(),Te=Object(r.useState)(!1),Pe=a()(Te,2),Ne=Pe[0],Ae=Pe[1],Ue=Object(r.useState)(!1),He=a()(Ue,2),Ze=He[0],Ie=He[1],Fe=(Se.formats.datetime,[]);if(Fe=2==n?[{label:Object(i.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(i.__)("Cloud","buddyboss-pro"),value:"cloud"},{label:Object(i.__)("Local","buddyboss-pro"),value:"local"}]:[{label:Object(i.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(i.__)("Local","buddyboss-pro"),value:"local"}],1===N){K=Object(i.__)("day","buddyboss-pro"),J=[];for(var Re=1;Re<=15;Re++)J.push({label:Re,value:Re})}else if(2===N){K=Object(i.__)("week","buddyboss-pro"),J=[];for(var Le=1;Le<=12;Le++)J.push({label:Le,value:Le})}else if(3===N){K=Object(i.__)("month","buddyboss-pro"),J=[];for(var We=1;We<=3;We++)J.push({label:We,value:We})}var Ve=function(e){var t;if(Object(u.isUndefined)(e.host_name)||(t=e.host_name,o({hostDisplayName:t})),Object(u.isUndefined)(e.host_email)||oe(e.host_email),!Object(u.isUndefined)(e.webinar)){var n=e.webinar;if(Object(u.isUndefined)(n.id)||te(n.id),Object(u.isUndefined)(n.host_id)||oe(n.host_id),Object(u.isUndefined)(n.topic)||ne(n.topic),Object(u.isUndefined)(n.agenda)||ae(n.agenda),Object(u.isUndefined)(n.timezone)||ce(n.timezone),Object(u.isUndefined)(n.start_time)||o({startDate:n.start_time}),Object(u.isUndefined)(n.duration)?!Object(u.isUndefined)(n.occurrences)&&n.occurrences.length&&ie(n.occurrences[0].duration):ie(n.duration),Object(u.isUndefined)(n.password)||se(n.password),!Object(u.isUndefined)(n.type)&&[6,9].includes(n.type)?je(!0):je(!1),!Object(u.isUndefined)(n.occurrences)&&n.occurrences.length&&xe(n.occurrences),!Object(u.isUndefined)(n.recurrence)){var a=n.recurrence;Object(u.isUndefined)(a.type)||Oe(a.type),Object(u.isUndefined)(a.repeat_interval)||fe(a.repeat_interval),Object(u.isUndefined)(a.end_times)||(ge(a.end_times),ke("times")),Object(u.isUndefined)(a.end_date_time)||(ve(a.end_date_time),ke("date")),Object(u.isUndefined)(a.weekly_days)||De(a.weekly_days.split(",")),Object(u.isUndefined)(a.monthly_day)||(Ee(a.monthly_day),Ce("day")),Object(u.isUndefined)(a.monthly_week)||(ze(a.monthly_week),Ce("week")),Object(u.isUndefined)(a.monthly_week_day)||(Me(a.monthly_week_day),Ce("week"))}if(!Object(u.isUndefined)(n.settings)){var r=n.settings;Object(u.isUndefined)(r.alternative_hosts)||Ye(r.alternative_hosts),Object(u.isUndefined)(r.approval_type)||0!=r.approval_type||be(!0),Object(u.isUndefined)(r.registration_type)||de(r.registration_type),Object(u.isUndefined)(r.host_video)||le(r.host_video),Object(u.isUndefined)(r.panelists_video)||ue(r.panelists_video),Object(u.isUndefined)(r.practice_session)||pe(r.practice_session),Object(u.isUndefined)(r.on_demand)||function(e){o({onDemand:e})}(r.on_demand),Object(u.isUndefined)(r.meeting_authentication)||me(r.meeting_authentication),Object(u.isUndefined)(r.auto_recording)||_e(r.auto_recording)}}};return Object(r.createElement)(r.Fragment,null,""===Y?Object(r.createElement)(d.Placeholder,{icon:"video-alt2",className:"bb-input-container webinar_block_title",label:Object(i.__)("Zoom Webinar","buddyboss-pro"),instructions:Object(i.__)("Create webinar or add existing webinar.","buddyboss-pro")},Object(r.createElement)(d.Button,{isSecondary:!0,onClick:function(){ye("create")}},Object(i.__)("Create Webinar","buddyboss-pro")),Object(r.createElement)(d.Button,{isSecondary:!0,onClick:function(){ye("existing")}},Object(i.__)("Add Existing Webinar","buddyboss-pro"))):"","existing"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.Placeholder,{icon:"video-alt2",className:"bb-meeting-id-input-container",label:Object(i.__)("Add Existing Webinar","buddyboss-pro")},Object(r.createElement)(d.TextControl,{label:Object(i.__)("Webinar ID","buddyboss-pro"),value:p,className:"components-placeholder__input bb-meeting-id-wrap",placeholder:Object(i.__)("Enter webinar ID without spaces…","buddyboss-pro"),onChange:te}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-id":p};y(n).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i>',wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Webinar Synced.","buddyboss-pro"),{isDismissible:!0}),Ve(e),ye("create"),o({external_webinar:!0});var n=wp.data.select("core/editor");n.isEditedPostSaveable()&&(!n.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(n.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(i.__)("Save","buddyboss-pro")),p<1||""===p?Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){ye("")}},Object(i.__)("Cancel","buddyboss-pro")):""))):"","create"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.Placeholder,{icon:"video-alt2",label:T?Object(i.__)("Existing Webinar","buddyboss-pro"):Object(i.__)("Create Webinar","buddyboss-pro"),className:"bp-meeting-block-create"},p>1||""!==p?Object(r.createElement)(d.Button,{isLink:!0,onClick:function(e){var t=e.currentTarget;t.innerHTML='<i class="bb-icon-l bb-icon-spinner animate-spin"></i> '+Object(i.__)("Sync","buddyboss-pro"),t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-id":p};y(o).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+Object(i.__)("Sync","buddyboss-pro"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Webinar Synced.","buddyboss-pro"),{isDismissible:!0}),Ve(e),ye("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+Object(i.__)("Sync","buddyboss-pro"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(r.createElement)("i",{className:"bb-icon-l bb-icon-bolt"})," ",Object(i.__)("Sync","buddyboss-pro")):"",Object(r.createElement)(d.TextControl,{label:"",type:"hidden",value:p}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Title","buddyboss-pro"),value:O,onChange:ne}),Object(r.createElement)(d.BaseControl,{label:Object(i.__)("When","buddyboss-pro"),className:"bb-meeting-time-wrap"},Object(r.createElement)("time",{dateTime:Object(b.date)("c",g)},Object(r.createElement)(d.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Ae((function(e){return!e}))}},m()(g).format("MMMM DD, YYYY h:mm a")),Ne&&Object(r.createElement)(d.Popover,{onClose:Ae.bind(null,!1)},Object(r.createElement)(d.DateTimePicker,{currentDate:g,onChange:re,is12Hour:!0})))),Object(r.createElement)("div",null,Object(r.createElement)(j,{timezone:h,options:bpZoomMeetingBlock.timezones,setTimezone:ce,clientId:t})),Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Auto Recording","buddyboss-pro"),value:B,options:Fe,onChange:_e,className:"bb_inline_selectBox"}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{className:"submit-meeting",isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":p,"bp-zoom-webinar-start-date":g,"bp-zoom-webinar-timezone":h,"bp-zoom-webinar-duration":v,"bp-zoom-webinar-password":w,"bp-zoom-webinar-recording":B,"bp-zoom-webinar-alt-host-ids":S,"bp-zoom-webinar-title":O,"bp-zoom-webinar-description":f,"bp-zoom-webinar-type":5};P&&(1===N?("date"===Z?o["bp-zoom-webinar-end-date-time"]=H:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=1,o["bp-zoom-webinar-end-time-select"]=Z,o["bp-zoom-webinar-repeat-interval"]=A,o["bp-zoom-webinar-type"]=9):2===N?(I&&(o["bp-zoom-webinar-weekly-days"]=I),"date"===Z?o["bp-zoom-webinar-end-date-time"]=H:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=2,o["bp-zoom-webinar-end-time-select"]=Z,o["bp-zoom-webinar-repeat-interval"]=A,o["bp-zoom-webinar-type"]=9):3===N?("day"===F?o["bp-zoom-webinar-monthly-day"]=R:"week"===F&&(o["bp-zoom-webinar-monthly-week"]=L,o["bp-zoom-webinar-monthly-week-day"]=W),"date"===Z?o["bp-zoom-webinar-end-date-time"]=H:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=3,o["bp-zoom-webinar-monthly-occurs-on"]=F,o["bp-zoom-webinar-end-time-select"]=Z,o["bp-zoom-webinar-repeat-interval"]=A,o["bp-zoom-webinar-type"]=9):o["bp-zoom-webinar-type"]=6),k&&(o["bp-zoom-webinar-registration"]=1,8===o["bp-zoom-webinar-type"]&&(o["bp-zoom-webinar-registration-type"]=D)),C&&(o["bp-zoom-webinar-host-video"]=1),E&&(o["bp-zoom-webinar-panelists-video"]=1),M&&(o["bp-zoom-webinar-on-demand"]=1),x&&(o["bp-zoom-webinar-authentication"]=1),z&&(o["bp-zoom-webinar-practice-session"]=1),wp.ajax.send("zoom_webinar_block_add",{data:o,success:function(e){e.webinar.id&&te(e.webinar.id),void 0!==e.webinar.occurrences&&e.webinar.occurrences.length&&xe(e.webinar.occurrences),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Webinar Updated.","buddyboss-pro"),{isDismissible:!0}),ye("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Save Webinar","buddyboss-pro")),p<1||""===p?Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){ye("")}},Object(i.__)("Cancel","buddyboss-pro")):Object(r.createElement)(d.Button,{isDestructive:!0,onClick:function(e){var o=e.target;if(confirm("Are you sure you want to delete this webinar?","buddyboss-pro")){o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":p};wp.ajax.send("zoom_webinar_block_delete_webinar",{data:n,success:function(){wp.data.dispatch("core/block-editor").removeBlock(t),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Webinar Deleted.","buddyboss-pro"),{isDismissible:!0});var e=wp.data.select("core/editor");e.isEditedPostSaveable()&&(!e.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(e.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}}},Object(i.__)("Delete","buddyboss-pro"))))):"","create"===Y?Object(r.createElement)(c.InspectorControls,null,Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Settings","buddyboss-pro"),initialOpen:!0},Object(r.createElement)(d.TextareaControl,{label:Object(i.__)("Description (optional)","buddyboss-pro"),value:f,onChange:ae}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Passcode (optional)","buddyboss-pro"),onChange:se,value:w}),Object(r.createElement)(d.TextControl,{type:"number",label:Object(i.__)("Duration (minutes)","buddyboss-pro"),onChange:ie,value:v}),Object(r.createElement)(d.TextControl,{label:Object(i.__)("Default Host","buddyboss-pro"),type:"text",disabled:!0,value:_}),2==n?Object(r.createElement)(d.TextControl,{label:Object(i.__)("Alternative Hosts","buddyboss-pro"),onChange:Ye,value:S,placeholder:Object(i.__)("Example: mary@company.com","buddyboss-pro"),help:Object(i.__)("Entered by email, comma separated. Each email added needs to match with a user in your Zoom account.","buddyboss-pro")}):"",Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Start video when host joins","buddyboss-pro"),checked:C,onChange:le,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Start video when panelists join","buddyboss-pro"),checked:E,onChange:ue,className:"bb-checkbox-wrap"}),2!=n||s?"":Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Require Registration","buddyboss-pro"),checked:k,onChange:be,className:"bb-checkbox-wrap"}),k&&P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.RadioControl,{selected:D,options:[{label:Object(i.__)("Attendees register once and can attend any of the occurrences","buddyboss-pro"),value:1},{label:Object(i.__)("Attendees need to register for each occurrence to attend","buddyboss-pro"),value:2},{label:Object(i.__)("Attendees register once and can choose one or more occurrences to attend","buddyboss-pro"),value:3}],onChange:de})):""),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Enable practice session","buddyboss-pro"),checked:z,onChange:pe,className:"bb-checkbox-wrap"}),Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Only authenticated users can join","buddyboss-pro"),checked:x,onChange:me,className:"bb-checkbox-wrap"})),Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Recurring Options","buddyboss-pro"),initialOpen:!1},Object(r.createElement)(d.CheckboxControl,{label:Object(i.__)("Recurring Webinar","buddyboss-pro"),checked:P,onChange:je}),!0===P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Recurrence","buddyboss-pro"),value:N,options:[{label:Object(i.__)("Daily","buddyboss-pro"),value:1},{label:Object(i.__)("Weekly","buddyboss-pro"),value:2},{label:Object(i.__)("Monthly","buddyboss-pro"),value:3}],onChange:Oe}),Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Repeat every","buddyboss-pro"),value:A,options:J,onChange:fe,help:K}),2===N?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Days","buddyboss-pro"),value:I,options:[{label:Object(i.__)("Sunday","buddyboss-pro"),value:1},{label:Object(i.__)("Monday","buddyboss-pro"),value:2},{label:Object(i.__)("Tuesday","buddyboss-pro"),value:3},{label:Object(i.__)("Wednesday","buddyboss-pro"),value:4},{label:Object(i.__)("Thursday","buddyboss-pro"),value:5},{label:Object(i.__)("Friday","buddyboss-pro"),value:6},{label:Object(i.__)("Saturday","buddyboss-pro"),value:7}],onChange:De,multiple:!0}):"",3===N?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Occures on","buddyboss-pro"),value:F,options:[{label:Object(i.__)("Day of the month","buddyboss-pro"),value:"day"},{label:Object(i.__)("Week of the month","buddyboss-pro"),value:"week"}],onChange:Ce}),"day"===F?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("Day","buddyboss-pro"),value:R,options:[{label:Object(i.__)("1","buddyboss-pro"),value:1},{label:Object(i.__)("2","buddyboss-pro"),value:2},{label:Object(i.__)("3","buddyboss-pro"),value:3},{label:Object(i.__)("4","buddyboss-pro"),value:4},{label:Object(i.__)("5","buddyboss-pro"),value:5},{label:Object(i.__)("6","buddyboss-pro"),value:6},{label:Object(i.__)("7","buddyboss-pro"),value:7},{label:Object(i.__)("8","buddyboss-pro"),value:8},{label:Object(i.__)("9","buddyboss-pro"),value:9},{label:Object(i.__)("10","buddyboss-pro"),value:10},{label:Object(i.__)("11","buddyboss-pro"),value:11},{label:Object(i.__)("12","buddyboss-pro"),value:12},{label:Object(i.__)("13","buddyboss-pro"),value:13},{label:Object(i.__)("14","buddyboss-pro"),value:14},{label:Object(i.__)("15","buddyboss-pro"),value:15},{label:Object(i.__)("16","buddyboss-pro"),value:16},{label:Object(i.__)("17","buddyboss-pro"),value:17},{label:Object(i.__)("18","buddyboss-pro"),value:18},{label:Object(i.__)("19","buddyboss-pro"),value:19},{label:Object(i.__)("20","buddyboss-pro"),value:20},{label:Object(i.__)("21","buddyboss-pro"),value:21},{label:Object(i.__)("22","buddyboss-pro"),value:22},{label:Object(i.__)("23","buddyboss-pro"),value:23},{label:Object(i.__)("24","buddyboss-pro"),value:24},{label:Object(i.__)("25","buddyboss-pro"),value:25},{label:Object(i.__)("26","buddyboss-pro"),value:26},{label:Object(i.__)("27","buddyboss-pro"),value:27},{label:Object(i.__)("28","buddyboss-pro"),value:28},{label:Object(i.__)("29","buddyboss-pro"),value:29},{label:Object(i.__)("30","buddyboss-pro"),value:30},{label:Object(i.__)("31","buddyboss-pro"),value:31}],onChange:Ee,help:Object(i.__)("of the month","buddyboss-pro")}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{value:L,options:[{label:Object(i.__)("First","buddyboss-pro"),value:1},{label:Object(i.__)("Second","buddyboss-pro"),value:2},{label:Object(i.__)("Third","buddyboss-pro"),value:3},{label:Object(i.__)("Fourth","buddyboss-pro"),value:4},{label:Object(i.__)("Last","buddyboss-pro"),value:-1}],onChange:ze}),Object(r.createElement)(d.SelectControl,{value:W,options:[{label:Object(i.__)("Sunday","buddyboss-pro"),value:1},{label:Object(i.__)("Monday","buddyboss-pro"),value:2},{label:Object(i.__)("Tuesday","buddyboss-pro"),value:3},{label:Object(i.__)("Wednesday","buddyboss-pro"),value:4},{label:Object(i.__)("Thursday","buddyboss-pro"),value:5},{label:Object(i.__)("Friday","buddyboss-pro"),value:6},{label:Object(i.__)("Saturday","buddyboss-pro"),value:7}],onChange:Me,help:Object(i.__)("of the month","buddyboss-pro")}))):"",4!==N?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.SelectControl,{label:Object(i.__)("End by","buddyboss-pro"),value:Z,options:[{label:Object(i.__)("Date","buddyboss-pro"),value:"date"},{label:Object(i.__)("Occurrences","buddyboss-pro"),value:"times"}],onChange:ke}),"date"==Z?Object(r.createElement)("time",{dateTime:Object(b.date)("c",H)},Object(r.createElement)(d.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Ie((function(e){return!e}))}},m()(H).format("MMMM DD, YYYY")),Ze&&Object(r.createElement)(d.Popover,{onClose:Ie.bind(null,!1)},Object(r.createElement)(d.DatePicker,{currentDate:H,onChange:ve}))):"","times"==Z?Object(r.createElement)(d.SelectControl,{label:Object(i.__)("End After","buddyboss-pro"),value:U,help:Object(i.__)("occurences","buddyboss-pro"),options:[{label:Object(i.__)("1","buddyboss-pro"),value:1},{label:Object(i.__)("2","buddyboss-pro"),value:2},{label:Object(i.__)("3","buddyboss-pro"),value:3},{label:Object(i.__)("4","buddyboss-pro"),value:4},{label:Object(i.__)("5","buddyboss-pro"),value:5},{label:Object(i.__)("6","buddyboss-pro"),value:6},{label:Object(i.__)("7","buddyboss-pro"),value:7},{label:Object(i.__)("8","buddyboss-pro"),value:8},{label:Object(i.__)("9","buddyboss-pro"),value:9},{label:Object(i.__)("10","buddyboss-pro"),value:10},{label:Object(i.__)("11","buddyboss-pro"),value:11},{label:Object(i.__)("12","buddyboss-pro"),value:12},{label:Object(i.__)("13","buddyboss-pro"),value:13},{label:Object(i.__)("14","buddyboss-pro"),value:14},{label:Object(i.__)("15","buddyboss-pro"),value:15},{label:Object(i.__)("16","buddyboss-pro"),value:16},{label:Object(i.__)("17","buddyboss-pro"),value:17},{label:Object(i.__)("18","buddyboss-pro"),value:18},{label:Object(i.__)("19","buddyboss-pro"),value:19},{label:Object(i.__)("20","buddyboss-pro"),value:20}],onChange:ge}):""):""):""),!0===P&&V.length?Object(r.createElement)(d.PanelBody,{title:Object(i.__)("Occurrences","buddyboss-pro"),initialOpen:!1},V.map((function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e.start_time);return t.getTime()>n.getTime()||"deleted"===e.status?"":Object(r.createElement)(r.Fragment,{key:e.occurrence_id},Object(r.createElement)(d.__experimentalText,{as:"p"},m()(e.start_time).format("MMMM DD, YYYY h:mm a")),Object(r.createElement)(d.Button,{isLink:!0,className:"edit-occurrences-button",onClick:function(){var t;Be(!0),o({current_occurrence:t=e}),we(t.duration),he(t.start_time)}},Object(i.__)("Edit","buddyboss-pro")),Object(r.createElement)(d.Button,{isLink:"true",className:"edit-occurrences-button",onClick:function(t){var o=t.target;if(!confirm(bpZoomMeetingBlock.delete_occurrence_confirm_str))return!1;o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":p,"bp-zoom-webinar-occurrence-id":e.occurrence_id};wp.ajax.send("zoom_webinar_block_delete_occurrence",{data:n,success:function(){xe(V.filter((function(t){return t.occurrence_id!==e.occurrence_id}))),Be(!1),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Occurrence Deleted.","buddyboss-pro"),{isDismissible:!0});var t=wp.data.select("core/editor");t.isEditedPostSaveable()&&(!t.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(t.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Delete","buddyboss-pro")),Q&&q&&q.occurrence_id===e.occurrence_id?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.DateTimePicker,{is12Hour:!0,currentDate:$,onChange:he}),Object(r.createElement)(d.TextControl,{type:"number",label:Object(i.__)("Duration (minutes)","buddyboss-pro"),onChange:we,value:G}),Object(r.createElement)(d.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(d.Button,{isPrimary:!0,className:"submit-meeting",onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":p,"bp-zoom-webinar-occurrence-id":q.occurrence_id,"bp-zoom-webinar-start-time":$,"bp-zoom-webinar-timezone":h,"bp-zoom-webinar-duration":G,"bp-zoom-webinar-recording":B,"bp-zoom-webinar-alt-host-ids":S};C&&(o["bp-zoom-webinar-host-video"]=1),E&&(o["bp-zoom-webinar-panelists-video"]=1),z&&(o["bp-zoom-webinar-practice-session"]=1),M&&(o["bp-zoom-webinar-on-demand"]=1),x&&(o["bp-zoom-webinar-authentication"]=1),wp.ajax.send("zoom_webinar_block_update_occurrence",{data:o,success:function(){for(var e in V)if(V[e].occurrence_id===q.occurrence_id){V[e].duration=G,V[e].start_time=$;break}xe(V),Be(!1),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(i.__)("Webinar Updated.","buddyboss-pro"),{isDismissible:!0});var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(i.__)("Save","buddyboss-pro")),Object(r.createElement)(d.Button,{isTertiary:!0,onClick:function(){Be(!1)}},Object(i.__)("Cancel","buddyboss-pro")))):"")}))):""):"")}});var g=function(){var e=wp.data.select("core/block-editor").getBlocks(),t=[],o=0;for(o in e)e[o].isValid&&"bp-zoom-meeting/create-meeting"===e[o].name&&t.push(e[o]);return t},v=function(){var e=wp.data.select("core/block-editor").getBlocks(),t=[],o=0;for(o in e)e[o].isValid&&"bp-zoom-meeting/create-webinar"===e[o].name&&t.push(e[o]);return t};wp.domReady((function(){jQuery(document).on("click",".editor-post-publish-button",(function(e){e.stopPropagation(),e.preventDefault();var t=g();if(t.length)for(var o in t)jQuery("#block-"+t[o].clientId).find(".submit-meeting").trigger("click");var n=v();if(n.length)for(var a in n)jQuery("#block-"+n[a].clientId).find(".submit-meeting").trigger("click")}))}));var h=function(e){return e.clientId},w=!1,k=setInterval((function(){var e,t,o;(document.getElementById("post-title-0")||document.getElementById("post-title-1"))&&(w=!0,wp.data.subscribe((e=wp.data.select("core/block-editor").getBlocks,t=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object(u.differenceBy)(e,t,h),a=Object(u.differenceBy)(t,e,h);if(t.length==e.length&&o){for(var r in a){var i=a[r],c="blocks.transformed.from."+Object(u.camelCase)(i.name);Object(l.doAction)(c,i)}for(var r in n){var s=n[r],b="blocks.transformed.to."+Object(u.camelCase)(s.name);Object(l.doAction)(b,s)}}for(var r in n){var d=n[r],p="blocks.added."+Object(u.camelCase)(d.name);Object(l.doAction)(p,d)}for(var r in a){var m=a[r],_="blocks.removed."+Object(u.camelCase)(m.name);Object(l.doAction)(_,m)}},o=e(),function(){var n=e();n.length!==o.length?(t(n,o),o=n):Object(u.differenceBy)(n,o,h).length&&(t(n,o,Object(u.differenceBy)(n,o,h)),o=n)}))),w&&clearInterval(k)}),500);Object(l.addAction)("blocks.added.bpZoomMeetingCreateMeeting","bpZoomMeetingCreateMeeting/addBlock",(function(e){e.attributes.meetingId="",e.attributes.id=""})),Object(l.addAction)("blocks.added.bpZoomMeetingCreateWebinar","bpZoomMeetingCreateWebinar/addBlock",(function(e){e.attributes.webinarId="",e.attributes.id=""}))}]);