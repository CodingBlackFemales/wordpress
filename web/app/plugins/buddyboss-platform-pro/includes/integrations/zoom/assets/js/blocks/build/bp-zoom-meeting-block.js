!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.moment},function(e,t,o){var n=o(10),a=o(11),i=o(12),c=o(14);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||c()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,a,i,c,r=[],l=!0,b=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(n=i.call(o)).done)&&(r.push(n.value),r.length!==t);l=!0);}catch(e){b=!0,a=e}finally{try{if(!l&&null!=o.return&&(c=o.return(),Object(c)!==c))return}finally{if(b)throw a}}return r}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,o){var n=o(13);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,o){"use strict";o.r(t),o.d(t,"isBuddyBossInCategories",(function(){return f})),o.d(t,"getMeetingBlocks",(function(){return y})),o.d(t,"getWebinarBlocks",(function(){return h}));var n=o(5),a=o.n(n),i=o(0),c=o(2),r=o(8),l=o(9),b=o(6),s=o(1),d=o(7),m=o(3),u=o(4),_=o.n(u),p=function(e){return new Promise((function(t,o){wp.ajax.send("zoom_meeting_sync",{data:e,success:function(e){t(e)},error:function(e){o(e)}})}))},g=function(e){return new Promise((function(t,o){wp.ajax.send("zoom_webinar_sync",{data:e,success:function(e){t(e)},error:function(e){o(e)}})}))};function k(e){var t=e.options,o=e.setTimezone,n=e.timezone,c=e.clientId,r=Object(i.useState)(n),l=a()(r,2),b=l[0],d=l[1],m=Object(i.useState)(t),u=a()(m,2),_=u[0],p=u[1],g=Object(i.useState)(!1),k=a()(g,2),f=k[0],v=k[1],y=Object(i.useRef)(null),h=Object(i.useRef)(null);return Object(i.useEffect)((function(){function e(e){h.current&&!h.current.contains(e.target)&&v(!1)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[h]),Object(i.useEffect)((function(){if(f){var e=document.querySelector("#block-"+c+" .Select_suggestions-list"),t=e.querySelector(".active");t&&(e.scrollTop=t.offsetTop-70)}}),[f]),Object(i.createElement)("div",{className:"select_main",ref:h},Object(i.createElement)("div",{className:"select_option",onClick:function(){return p(t),void v(!0)}},Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_timezone,value:b,options:t,onChange:o,className:"bb_inline_selectBox"})),f&&Object(i.createElement)("div",{className:"Select_suggestions-wrapper"},Object(i.createElement)(s.TextControl,{onChange:function(e){return function(e){if(""!==e){var o=t.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())}));p(o)}else p(t)}(e)},label:bpZoomMeetingBlock.block_zoom_search_timezone,hideLabelFromVision:!0,autoComplete:"off"}),Object(i.createElement)("ul",{className:"Select_suggestions-list",ref:y},_.length?_.map((function(e){return Object(i.createElement)("li",{key:e.value,onClick:function(){return function(e){d(e),o(e),v(!1)}(e.value)},className:"Select_suggestions-list-item ".concat(b===e.value?"active":"")},e.label)})):Object(i.createElement)("li",{className:"Select_suggestions-list-item no-result"},bpZoomMeetingBlock.block_zoom_no_results))))}var f=function(){var e=wp.blocks.getCategories();for(var t in e)if("buddyboss"===e[t].slug)return!0;return!1},v=new Date(bpZoomMeetingBlock.wp_date_time);v.setMinutes(v.getMinutes()+(60-v.getMinutes())),Object(l.registerBlockType)("bp-zoom-meeting/create-meeting",{title:bpZoomMeetingBlock.block_zoom_meeting,description:bpZoomMeetingBlock.block_create_meeting_in_zoom,icon:"video-alt2",category:f()?"buddyboss":"common",keywords:[Object(c.__)("zoom","buddyboss-pro"),Object(c.__)("meeting","buddyboss-pro")],supports:{html:!1,reusable:!1},attributes:{id:{type:"number",default:""},meetingId:{type:"number",default:""},hostId:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_id?bpZoomMeetingBlock.default_host_id:""},hostDisplayName:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_user?bpZoomMeetingBlock.default_host_user:""},alt_hosts:{type:"string",default:""},title:{type:"string",default:""},description:{type:"string",default:""},startDate:{type:"string",default:_()(v).format("YYYY-MM-DD HH:mm:ss")},duration:{type:"string",default:"30"},timezone:{type:"string",default:void 0!==bpZoomMeetingBlock.wp_timezone?bpZoomMeetingBlock.wp_timezone:""},password:{type:"string",default:""},registration:{type:"boolean",default:!1},registration_type:{type:"number",default:1},hostVideo:{type:"boolean",default:!1},participantsVideo:{type:"boolean",default:!1},joinBeforeHost:{type:"boolean",default:!1},muteParticipants:{type:"boolean",default:!1},waitingRoom:{type:"boolean",default:!1},authentication:{type:"boolean",default:!1},autoRecording:{type:"string",default:"none"},recurring:{type:"boolean",default:!1},recurrence:{type:"number",default:1},repeat_interval:{type:"number",default:1},end_time_select:{type:"string",default:"date"},end_times:{type:"number",default:7},end_date_time:{type:"string",default:_()((new Date).setDate(new Date(bpZoomMeetingBlock.wp_date_time).getDate()+6)).format("YYYY-MM-DD HH:mm:ss")},weekly_days:{type:"array",default:["4"]},monthly_occurs_on:{type:"string",default:"day"},monthly_day:{type:"number",default:1},monthly_week:{type:"number",default:1},monthly_week_day:{type:"number",default:1},occurrences:{type:"array",default:[]},current_occurrence:{type:"object",default:{}},occurrence_edit:{type:"boolean",default:!1},current_occurrence_start_time:{type:"string",default:""},current_occurrence_duration:{type:"number",default:0},meetingFormType:{type:"string",default:""},external_meeting:{type:"boolean",default:!1}},edit:function(e){var t=e.clientId,o=e.setAttributes,n=void 0!==bpZoomMeetingBlock.default_host_user_type?bpZoomMeetingBlock.default_host_user_type:1,l=e.attributes,d=l.meetingId,u=(l.hostId,l.hostDisplayName),g=l.title,f=l.description,v=l.startDate,y=l.duration,h=l.timezone,w=l.password,j=l.registration,O=l.registration_type,M=l.hostVideo,z=l.participantsVideo,B=l.joinBeforeHost,Z=l.muteParticipants,C=l.waitingRoom,D=l.authentication,E=l.autoRecording,x=l.meetingFormType,Y=l.alt_hosts,P=l.external_meeting,T=l.recurring,N=l.recurrence,S=l.repeat_interval,U=l.end_times,A=l.end_date_time,H=l.end_time_select,I=l.weekly_days,F=l.monthly_occurs_on,L=l.monthly_day,R=l.monthly_week,V=l.monthly_week_day,q=l.occurrences,Q=l.current_occurrence,W=l.occurrence_edit,$=l.current_occurrence_start_time,G=l.current_occurrence_duration,J=[],K=Object(c.__)("day","buddyboss-pro"),X=new Date(v),ee=new Date,te=function(e){var t=new RegExp("^\\d+$");""!==e&&t.test(e)&&(e=parseInt(e.toString().replace(/\s/g,""))),o({meetingId:e})},oe=function(e){o({hostId:e})},ne=function(e){o({title:e})},ae=function(e){o({description:e})},ie=function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e);if(t.getTime()<n.getTime()){o({startDate:e});var a=new Date(A);if(n.getTime()>=a.getTime()){var i=new Date(e);1===N?(i.setDate(i.getDate()+6*S),je(_()(i).format("YYYY-MM-DD HH:mm:ss"))):2===N?(i.setDate(i.getDate()+7*S*6),je(_()(i).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(i.setMonth(i.getMonth()+6*S),je(_()(i).format("YYYY-MM-DD HH:mm:ss")))}}},ce=function(e){o({duration:e})},re=function(e){o({timezone:e});var t=new Date((new Date).toLocaleString("en-US",{timeZone:e})),n=""+(t.getMonth()+1),a=""+t.getDate(),i=t.getFullYear(),c=""+t.getHours(),r=""+t.getMinutes(),l=""+t.getSeconds();n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),c.length<2&&(c="0"+c),r.length<2&&(r="0"+r),l.length<2&&(l="0"+l),bpZoomMeetingBlock.wp_date_time=[i,n,a].join("-")+"T"+[c,r,l].join(":");var b=new Date(v);0===d.length&&b<t&&o({startDate:bpZoomMeetingBlock.wp_date_time})},le=function(e){o({password:e})},be=function(e){o({registration:e})},se=function(e){o({registration_type:parseInt(e)})},de=function(e){o({hostVideo:e})},me=function(e){o({participantsVideo:e})},ue=function(e){o({joinBeforeHost:e})},_e=function(e){o({muteParticipants:e})},pe=function(e){o({waitingRoom:e})},ge=function(e){o({authentication:e})},ke=function(e){o({autoRecording:e})},fe=function(e){o({meetingFormType:e})},ve=function(e){o({recurring:e})},ye=function(e){o({recurrence:parseInt(e)}),1==e?(ee.setDate(X.getDate()+6*S),je(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):2==e?(ee.setDate(X.getDate()+7*S*6),je(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):3==e&&(ee.setMonth(X.getMonth()+6*S),je(_()(ee).format("YYYY-MM-DD HH:mm:ss")))},he=function(e){o({repeat_interval:e}),1===N?(ee.setDate(X.getDate()+6*e),je(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):2===N?(ee.setDate(X.getDate()+7*e*6),je(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(ee.setMonth(X.getMonth()+6*e),je(_()(ee).format("YYYY-MM-DD HH:mm:ss")))},we=function(e){o({end_times:parseInt(e)})},je=function(e){var t=new Date(v),n=new Date(e);t.getTime()<n.getTime()&&o({end_date_time:e})},Oe=function(e){var t=new Date,n=new Date(e);t.getTime()<n.getTime()&&o({current_occurrence_start_time:e})},Me=function(e){o({current_occurrence_duration:e})},ze=function(e){o({end_time_select:e})},Be=function(e){o({weekly_days:e})},Ze=function(e){o({monthly_occurs_on:e})},Ce=function(e){o({monthly_day:parseInt(e)})},De=function(e){o({monthly_week:e})},Ee=function(e){o({monthly_week_day:parseInt(e)})},xe=function(e){for(var t in o({occurrences:e}),e){var n=new Date(bpZoomMeetingBlock.wp_date_time),a=new Date(e[t].start_time);if(n.getTime()<a.getTime()&&"deleted"!==e[t].status){ie(e[t].start_time);break}}},Ye=function(e){o({occurrence_edit:e})},Pe=function(e){o({alt_hosts:e})},Te=Object(b.__experimentalGetSettings)(),Ne=Object(i.useState)(!1),Se=a()(Ne,2),Ue=Se[0],Ae=Se[1],He=Object(i.useState)(!1),Ie=a()(He,2),Fe=Ie[0],Le=Ie[1],Re=(Te.formats.datetime,[]);if(Re=2==n?[{label:bpZoomMeetingBlock.block_zoom_no_recordings,value:"none"},{label:bpZoomMeetingBlock.block_zoom_cloud,value:"cloud"},{label:bpZoomMeetingBlock.block_zoom_local,value:"local"}]:[{label:bpZoomMeetingBlock.block_zoom_no_recordings,value:"none"},{label:bpZoomMeetingBlock.block_zoom_local,value:"local"}],1===N){K=Object(c.__)("day","buddyboss-pro"),J=[];for(var Ve=1;Ve<=15;Ve++)J.push({label:Ve,value:Ve})}else if(2===N){K=Object(c.__)("week","buddyboss-pro"),J=[];for(var qe=1;qe<=12;qe++)J.push({label:qe,value:qe})}else if(3===N){K=Object(c.__)("month","buddyboss-pro"),J=[];for(var Qe=1;Qe<=3;Qe++)J.push({label:Qe,value:Qe})}var We=function(e){var t;if(Object(m.isUndefined)(e.host_name)||(t=e.host_name,o({hostDisplayName:t})),Object(m.isUndefined)(e.host_email)||oe(e.host_email),!Object(m.isUndefined)(e.meeting)){var n=e.meeting;if(Object(m.isUndefined)(n.id)||te(n.id),Object(m.isUndefined)(n.host_id)||oe(n.host_id),Object(m.isUndefined)(n.topic)||ne(n.topic),Object(m.isUndefined)(n.agenda)||ae(n.agenda),Object(m.isUndefined)(n.timezone)||re(n.timezone),Object(m.isUndefined)(n.start_time)||o({startDate:n.start_time}),Object(m.isUndefined)(n.duration)?!Object(m.isUndefined)(n.occurrences)&&n.occurrences.length&&ce(n.occurrences[0].duration):ce(n.duration),Object(m.isUndefined)(n.password)||le(n.password),!Object(m.isUndefined)(n.type)&&[3,8].includes(n.type)?ve(!0):ve(!1),!Object(m.isUndefined)(n.occurrences)&&n.occurrences.length&&xe(n.occurrences),!Object(m.isUndefined)(n.recurrence)){var a=n.recurrence;Object(m.isUndefined)(a.type)||ye(a.type),Object(m.isUndefined)(a.repeat_interval)||he(a.repeat_interval),Object(m.isUndefined)(a.end_times)||(we(a.end_times),ze("times")),Object(m.isUndefined)(a.end_date_time)||(je(a.end_date_time),ze("date")),Object(m.isUndefined)(a.weekly_days)||Be(a.weekly_days.split(",")),Object(m.isUndefined)(a.monthly_day)||(Ce(a.monthly_day),Ze("day")),Object(m.isUndefined)(a.monthly_week)||(De(a.monthly_week),Ze("week")),Object(m.isUndefined)(a.monthly_week_day)||(Ee(a.monthly_week_day),Ze("week"))}if(!Object(m.isUndefined)(n.settings)){var i=n.settings;Object(m.isUndefined)(i.alternative_hosts)||Pe(i.alternative_hosts),Object(m.isUndefined)(i.approval_type)||0!=i.approval_type||be(!0),Object(m.isUndefined)(i.registration_type)||se(i.registration_type),Object(m.isUndefined)(i.host_video)||de(i.host_video),Object(m.isUndefined)(i.participant_video)||me(i.participant_video),Object(m.isUndefined)(i.join_before_host)||ue(i.join_before_host),Object(m.isUndefined)(i.mute_upon_entry)||_e(i.mute_upon_entry),Object(m.isUndefined)(i.waiting_room)||pe(i.waiting_room),Object(m.isUndefined)(i.meeting_authentication)||ge(i.meeting_authentication),Object(m.isUndefined)(i.auto_recording)||ke(i.auto_recording)}}};return Object(i.createElement)(i.Fragment,null,""===x?Object(i.createElement)(s.Placeholder,{icon:"video-alt2",className:"bb-input-container meeting_block_title",label:bpZoomMeetingBlock.block_zoom_meeting,instructions:bpZoomMeetingBlock.block_create_add_zoom},Object(i.createElement)(s.Button,{isSecondary:!0,onClick:function(){fe("create")}},bpZoomMeetingBlock.block_create_zoom_meeting),Object(i.createElement)(s.Button,{isSecondary:!0,onClick:function(){fe("existing")}},bpZoomMeetingBlock.block_add_zoom_meeting)):"","existing"===x?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.Placeholder,{icon:"video-alt2",className:"bb-meeting-id-input-container",label:bpZoomMeetingBlock.block_add_zoom_meeting},Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_meeting_id,value:d,className:"components-placeholder__input bb-meeting-id-wrap",placeholder:bpZoomMeetingBlock.block_enter_meeting_id,onChange:te}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-id":d};p(n).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i>',wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_meeting_synced,{isDismissible:!0}),We(e),fe("create"),o({external_meeting:!0});var n=wp.data.select("core/editor");n.isEditedPostSaveable()&&(!n.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(n.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},bpZoomMeetingBlock.block_zoom_save),d<1||""===d?Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){fe("")}},bpZoomMeetingBlock.block_zoom_cancel):""))):"","create"===x?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.Placeholder,{icon:"video-alt2",label:P?bpZoomMeetingBlock.block_existing_meeting:bpZoomMeetingBlock.block_create_zoom_meeting,className:"bp-meeting-block-create"},d>1||""!==d?Object(i.createElement)(s.Button,{isLink:!0,onClick:function(e){var t=e.currentTarget;t.innerHTML='<i class="bb-icon-l bb-icon-spinner animate-spin"></i> '+bpZoomMeetingBlock.block_zoom_sync,t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-id":d};p(o).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+bpZoomMeetingBlock.block_zoom_sync,wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_meeting_synced,{isDismissible:!0}),We(e),fe("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+bpZoomMeetingBlock.block_zoom_sync,wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(i.createElement)("i",{className:"bb-icon-l bb-icon-bolt"})," ",bpZoomMeetingBlock.block_zoom_sync):"",Object(i.createElement)(s.TextControl,{label:"",type:"hidden",value:d}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_title,value:g,onChange:ne}),Object(i.createElement)(s.BaseControl,{label:bpZoomMeetingBlock.block_zoom_when,className:"bb-meeting-time-wrap"},Object(i.createElement)("time",{dateTime:Object(b.date)("c",v)},Object(i.createElement)(s.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Ae((function(e){return!e}))}},_()(v).format("MMMM DD, YYYY h:mm a")),Ue&&Object(i.createElement)(s.Popover,{onClose:Ae.bind(null,!1)},Object(i.createElement)(s.DateTimePicker,{currentDate:v,onChange:ie,is12Hour:!0})))),Object(i.createElement)("div",null,Object(i.createElement)(k,{timezone:h,options:bpZoomMeetingBlock.timezones,setTimezone:re,clientId:t})),Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_auto_recording,value:E,options:Re,onChange:ke,className:"bb_inline_selectBox"}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{className:"submit-meeting",isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":d,"bp-zoom-meeting-start-date":v,"bp-zoom-meeting-timezone":h,"bp-zoom-meeting-duration":y,"bp-zoom-meeting-password":w,"bp-zoom-meeting-recording":E,"bp-zoom-meeting-alt-host-ids":Y,"bp-zoom-meeting-title":g,"bp-zoom-meeting-description":f,"bp-zoom-meeting-type":2};T&&(1===N?("date"===H?o["bp-zoom-meeting-end-date-time"]=A:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=1,o["bp-zoom-meeting-end-time-select"]=H,o["bp-zoom-meeting-repeat-interval"]=S,o["bp-zoom-meeting-type"]=8):2===N?(I&&(o["bp-zoom-meeting-weekly-days"]=I),"date"===H?o["bp-zoom-meeting-end-date-time"]=A:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=2,o["bp-zoom-meeting-end-time-select"]=H,o["bp-zoom-meeting-repeat-interval"]=S,o["bp-zoom-meeting-type"]=8):3===N?("day"===F?o["bp-zoom-meeting-monthly-day"]=L:"week"===F&&(o["bp-zoom-meeting-monthly-week"]=R,o["bp-zoom-meeting-monthly-week-day"]=V),"date"===H?o["bp-zoom-meeting-end-date-time"]=A:o["bp-zoom-meeting-end-times"]=U,o["bp-zoom-meeting-recurrence"]=3,o["bp-zoom-meeting-monthly-occurs-on"]=F,o["bp-zoom-meeting-end-time-select"]=H,o["bp-zoom-meeting-repeat-interval"]=S,o["bp-zoom-meeting-type"]=8):o["bp-zoom-meeting-type"]=3),j&&(o["bp-zoom-meeting-registration"]=1,8===o["bp-zoom-meeting-type"]&&(o["bp-zoom-meeting-registration-type"]=O)),B&&(o["bp-zoom-meeting-join-before-host"]=1),M&&(o["bp-zoom-meeting-host-video"]=1),z&&(o["bp-zoom-meeting-participants-video"]=1),Z&&(o["bp-zoom-meeting-mute-participants"]=1),C&&(o["bp-zoom-meeting-waiting-room"]=1),D&&(o["bp-zoom-meeting-authentication"]=1),wp.ajax.send("zoom_meeting_block_add",{data:o,success:function(e){e.meeting.id&&te(e.meeting.id),void 0!==e.meeting.occurrences&&e.meeting.occurrences.length&&xe(e.meeting.occurrences),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_meeting_updated,{isDismissible:!0}),fe("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_zoom_save_meeting),d<1||""===d?Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){fe("")}},bpZoomMeetingBlock.block_zoom_cancel):Object(i.createElement)(s.Button,{isDestructive:!0,onClick:function(e){var o=e.target;if(confirm("Are you sure you want to delete this meeting?","buddyboss-pro")){o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":d};wp.ajax.send("zoom_meeting_block_delete_meeting",{data:n,success:function(){wp.data.dispatch("core/block-editor").removeBlock(t),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_meeting_deleted,{isDismissible:!0});var e=wp.data.select("core/editor");e.isEditedPostSaveable()&&(!e.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(e.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}}},bpZoomMeetingBlock.block_zoom_delete)))):"","create"===x?Object(i.createElement)(r.InspectorControls,null,Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_zoom_settings,initialOpen:!0},Object(i.createElement)(s.TextareaControl,{label:bpZoomMeetingBlock.block_zoom_description,value:f,onChange:ae}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_passcode,onChange:le,value:w}),Object(i.createElement)(s.TextControl,{type:"number",label:bpZoomMeetingBlock.block_zoom_duration,onChange:ce,value:y}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_default_host,type:"text",disabled:!0,value:u}),2==n?Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_alt_hosts,onChange:Pe,value:Y,placeholder:bpZoomMeetingBlock.block_zoom_example,help:bpZoomMeetingBlock.block_zoom_email_enter}):"",Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_start_video,checked:M,onChange:de,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_start_video_par,checked:z,onChange:me,className:"bb-checkbox-wrap"}),2==n?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_require_reg,checked:j,onChange:be,className:"bb-checkbox-wrap"}),j&&T?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.RadioControl,{selected:O,options:[{label:bpZoomMeetingBlock.block_att_any,value:1},{label:bpZoomMeetingBlock.block_att_each,value:2},{label:bpZoomMeetingBlock.block_att_choose,value:3}],onChange:se})):""):"",Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_enable_join_before,checked:B,onChange:ue,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_mute_part,checked:Z,onChange:_e,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_enable_wait_room,checked:C,onChange:pe,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_only_auth,checked:D,onChange:ge,className:"bb-checkbox-wrap"})),Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_recurring_options,initialOpen:!1},Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_recurring_meeting,checked:T,onChange:ve}),!0===T?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_recurrence,value:N,options:[{label:bpZoomMeetingBlock.block_zoom_week_daily,value:1},{label:bpZoomMeetingBlock.block_zoom_week_weekly,value:2},{label:bpZoomMeetingBlock.block_zoom_week_monthly,value:3}],onChange:ye}),Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_repeat_every,value:S,options:J,onChange:he,help:K}),2===N?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_days,value:I,options:[{label:bpZoomMeetingBlock.block_zoom_sunday,value:1},{label:bpZoomMeetingBlock.block_zoom_monday,value:2},{label:bpZoomMeetingBlock.block_zoom_tuesday,value:3},{label:bpZoomMeetingBlock.block_zoom_wednesday,value:4},{label:bpZoomMeetingBlock.block_zoom_thursday,value:5},{label:bpZoomMeetingBlock.block_zoom_friday,value:6},{label:bpZoomMeetingBlock.block_zoom_saturday,value:7}],onChange:Be,multiple:!0}):"",3===N?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_occures,value:F,options:[{label:bpZoomMeetingBlock.block_zoom_day_month,value:"day"},{label:bpZoomMeetingBlock.block_zoom_week_month,value:"week"}],onChange:Ze}),"day"===F?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_day,value:L,options:[{label:Object(c.__)("1","buddyboss-pro"),value:1},{label:Object(c.__)("2","buddyboss-pro"),value:2},{label:Object(c.__)("3","buddyboss-pro"),value:3},{label:Object(c.__)("4","buddyboss-pro"),value:4},{label:Object(c.__)("5","buddyboss-pro"),value:5},{label:Object(c.__)("6","buddyboss-pro"),value:6},{label:Object(c.__)("7","buddyboss-pro"),value:7},{label:Object(c.__)("8","buddyboss-pro"),value:8},{label:Object(c.__)("9","buddyboss-pro"),value:9},{label:Object(c.__)("10","buddyboss-pro"),value:10},{label:Object(c.__)("11","buddyboss-pro"),value:11},{label:Object(c.__)("12","buddyboss-pro"),value:12},{label:Object(c.__)("13","buddyboss-pro"),value:13},{label:Object(c.__)("14","buddyboss-pro"),value:14},{label:Object(c.__)("15","buddyboss-pro"),value:15},{label:Object(c.__)("16","buddyboss-pro"),value:16},{label:Object(c.__)("17","buddyboss-pro"),value:17},{label:Object(c.__)("18","buddyboss-pro"),value:18},{label:Object(c.__)("19","buddyboss-pro"),value:19},{label:Object(c.__)("20","buddyboss-pro"),value:20},{label:Object(c.__)("21","buddyboss-pro"),value:21},{label:Object(c.__)("22","buddyboss-pro"),value:22},{label:Object(c.__)("23","buddyboss-pro"),value:23},{label:Object(c.__)("24","buddyboss-pro"),value:24},{label:Object(c.__)("25","buddyboss-pro"),value:25},{label:Object(c.__)("26","buddyboss-pro"),value:26},{label:Object(c.__)("27","buddyboss-pro"),value:27},{label:Object(c.__)("28","buddyboss-pro"),value:28},{label:Object(c.__)("29","buddyboss-pro"),value:29},{label:Object(c.__)("30","buddyboss-pro"),value:30},{label:Object(c.__)("31","buddyboss-pro"),value:31}],onChange:Ce,help:bpZoomMeetingBlock.block_zoom_of_month}):Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{value:R,options:[{label:bpZoomMeetingBlock.block_zoom_first,value:1},{label:bpZoomMeetingBlock.block_zoom_second,value:2},{label:bpZoomMeetingBlock.block_zoom_third,value:3},{label:bpZoomMeetingBlock.block_zoom_fourth,value:4},{label:bpZoomMeetingBlock.block_zoom_last,value:-1}],onChange:De}),Object(i.createElement)(s.SelectControl,{value:V,options:[{label:bpZoomMeetingBlock.block_zoom_sunday,value:1},{label:bpZoomMeetingBlock.block_zoom_monday,value:2},{label:bpZoomMeetingBlock.block_zoom_tuesday,value:3},{label:bpZoomMeetingBlock.block_zoom_wednesday,value:4},{label:bpZoomMeetingBlock.block_zoom_thursday,value:5},{label:bpZoomMeetingBlock.block_zoom_friday,value:6},{label:bpZoomMeetingBlock.block_zoom_saturday,value:7}],onChange:Ee,help:bpZoomMeetingBlock.block_zoom_of_month}))):"",4!==N?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_end_by,value:H,options:[{label:bpZoomMeetingBlock.block_zoom_date,value:"date"},{label:bpZoomMeetingBlock.block_zoom_occurrences,value:"times"}],onChange:ze}),"date"==H?Object(i.createElement)("time",{dateTime:Object(b.date)("c",A)},Object(i.createElement)(s.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Le((function(e){return!e}))}},_()(A).format("MMMM DD, YYYY")),Fe&&Object(i.createElement)(s.Popover,{onClose:Le.bind(null,!1)},Object(i.createElement)(s.DatePicker,{currentDate:A,onChange:je}))):"","times"==H?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_end_after,value:U,help:bpZoomMeetingBlock.block_zoom_occurrences_low,options:[{label:Object(c.__)("1","buddyboss-pro"),value:1},{label:Object(c.__)("2","buddyboss-pro"),value:2},{label:Object(c.__)("3","buddyboss-pro"),value:3},{label:Object(c.__)("4","buddyboss-pro"),value:4},{label:Object(c.__)("5","buddyboss-pro"),value:5},{label:Object(c.__)("6","buddyboss-pro"),value:6},{label:Object(c.__)("7","buddyboss-pro"),value:7},{label:Object(c.__)("8","buddyboss-pro"),value:8},{label:Object(c.__)("9","buddyboss-pro"),value:9},{label:Object(c.__)("10","buddyboss-pro"),value:10},{label:Object(c.__)("11","buddyboss-pro"),value:11},{label:Object(c.__)("12","buddyboss-pro"),value:12},{label:Object(c.__)("13","buddyboss-pro"),value:13},{label:Object(c.__)("14","buddyboss-pro"),value:14},{label:Object(c.__)("15","buddyboss-pro"),value:15},{label:Object(c.__)("16","buddyboss-pro"),value:16},{label:Object(c.__)("17","buddyboss-pro"),value:17},{label:Object(c.__)("18","buddyboss-pro"),value:18},{label:Object(c.__)("19","buddyboss-pro"),value:19},{label:Object(c.__)("20","buddyboss-pro"),value:20}],onChange:we}):""):""):""),!0===T&&q.length?Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_zoom_occurrences,initialOpen:!1},q.map((function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e.start_time);return t.getTime()>n.getTime()||"deleted"===e.status?"":Object(i.createElement)(i.Fragment,{key:e.occurrence_id},Object(i.createElement)(s.__experimentalText,{as:"p"},_()(e.start_time).format("MMMM DD, YYYY h:mm a")),Object(i.createElement)(s.Button,{isLink:!0,className:"edit-occurrences-button",onClick:function(){var t;Ye(!0),o({current_occurrence:t=e}),Me(t.duration),Oe(t.start_time)}},bpZoomMeetingBlock.block_zoom_edit),Object(i.createElement)(s.Button,{isLink:"true",className:"edit-occurrences-button",onClick:function(t){var o=t.target;if(!confirm(bpZoomMeetingBlock.delete_occurrence_confirm_str))return!1;o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":d,"bp-zoom-meeting-occurrence-id":e.occurrence_id};wp.ajax.send("zoom_meeting_block_delete_occurrence",{data:n,success:function(){xe(q.filter((function(t){return t.occurrence_id!==e.occurrence_id}))),Ye(!1),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_zoom_occurrence_del,{isDismissible:!0});var t=wp.data.select("core/editor");t.isEditedPostSaveable()&&(!t.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(t.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_zoom_delete),W&&Q&&Q.occurrence_id===e.occurrence_id?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.DateTimePicker,{is12Hour:!0,currentDate:$,onChange:Oe}),Object(i.createElement)(s.TextControl,{type:"number",label:bpZoomMeetingBlock.block_zoom_duration,onChange:Me,value:G}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{isPrimary:!0,className:"submit-meeting",onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":d,"bp-zoom-meeting-occurrence-id":Q.occurrence_id,"bp-zoom-meeting-start-time":$,"bp-zoom-meeting-timezone":h,"bp-zoom-meeting-duration":G,"bp-zoom-meeting-recording":E,"bp-zoom-meeting-alt-host-ids":Y};B&&(o["bp-zoom-meeting-join-before-host"]=1),M&&(o["bp-zoom-meeting-host-video"]=1),z&&(o["bp-zoom-meeting-participants-video"]=1),Z&&(o["bp-zoom-meeting-mute-participants"]=1),C&&(o["bp-zoom-meeting-waiting-room"]=1),D&&(o["bp-zoom-meeting-authentication"]=1),wp.ajax.send("zoom_meeting_block_update_occurrence",{data:o,success:function(){for(var e in q)if(q[e].occurrence_id===Q.occurrence_id){q[e].duration=G,q[e].start_time=$;break}xe(q),Ye(!1),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_meeting_updated,{isDismissible:!0});var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_zoom_save),Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){Ye(!1)}},bpZoomMeetingBlock.block_zoom_cancel))):"")}))):""):"")}}),bpZoomMeetingBlock.webinar_enabled&&Object(l.registerBlockType)("bp-zoom-meeting/create-webinar",{title:bpZoomMeetingBlock.block_zoom_webinar,description:bpZoomMeetingBlock.block_zoom_create_webinar,icon:"video-alt2",category:f()?"buddyboss":"common",keywords:[Object(c.__)("zoom","buddyboss-pro"),Object(c.__)("webinar","buddyboss-pro")],supports:{html:!1,reusable:!1},attributes:{id:{type:"number",default:""},webinarId:{type:"number",default:""},hostId:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_id?bpZoomMeetingBlock.default_host_id:""},hostDisplayName:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_user?bpZoomMeetingBlock.default_host_user:""},alt_hosts:{type:"string",default:""},title:{type:"string",default:""},description:{type:"string",default:""},startDate:{type:"string",default:_()(v).format("YYYY-MM-DD HH:mm:ss")},duration:{type:"string",default:"30"},timezone:{type:"string",default:void 0!==bpZoomMeetingBlock.wp_timezone?bpZoomMeetingBlock.wp_timezone:""},password:{type:"string",default:""},registration:{type:"boolean",default:!1},registration_type:{type:"number",default:1},hostVideo:{type:"boolean",default:!1},panelistsVideo:{type:"boolean",default:!1},practiceSession:{type:"boolean",default:!1},onDemand:{type:"boolean",default:!1},authentication:{type:"boolean",default:!1},autoRecording:{type:"string",default:"none"},recurring:{type:"boolean",default:!1},recurrence:{type:"number",default:1},repeat_interval:{type:"number",default:1},end_time_select:{type:"string",default:"date"},end_times:{type:"number",default:7},end_date_time:{type:"string",default:_()((new Date).setDate(new Date(bpZoomMeetingBlock.wp_date_time).getDate()+6)).format("YYYY-MM-DD HH:mm:ss")},weekly_days:{type:"array",default:["4"]},monthly_occurs_on:{type:"string",default:"day"},monthly_day:{type:"number",default:1},monthly_week:{type:"number",default:1},monthly_week_day:{type:"number",default:1},occurrences:{type:"array",default:[]},current_occurrence:{type:"object",default:{}},occurrence_edit:{type:"boolean",default:!1},current_occurrence_start_time:{type:"string",default:""},current_occurrence_duration:{type:"number",default:0},webinarFormType:{type:"string",default:""},external_webinar:{type:"boolean",default:!1}},edit:function(e){var t=e.clientId,o=e.setAttributes,n=void 0!==bpZoomMeetingBlock.default_host_user_type?bpZoomMeetingBlock.default_host_user_type:1,l=void 0!==bpZoomMeetingBlock.private_webinar&&bpZoomMeetingBlock.private_webinar,d=e.attributes,u=d.webinarId,p=(d.hostId,d.hostDisplayName),f=d.title,v=d.description,y=d.startDate,h=d.duration,w=d.timezone,j=d.password,O=d.registration,M=d.registration_type,z=d.hostVideo,B=d.panelistsVideo,Z=d.practiceSession,C=d.onDemand,D=d.authentication,E=d.autoRecording,x=d.webinarFormType,Y=d.alt_hosts,P=d.external_webinar,T=d.recurring,N=d.recurrence,S=d.repeat_interval,U=d.end_times,A=d.end_date_time,H=d.end_time_select,I=d.weekly_days,F=d.monthly_occurs_on,L=d.monthly_day,R=d.monthly_week,V=d.monthly_week_day,q=d.occurrences,Q=d.current_occurrence,W=d.occurrence_edit,$=d.current_occurrence_start_time,G=d.current_occurrence_duration,J=[],K=Object(c.__)("day","buddyboss-pro"),X=new Date(y),ee=new Date,te=function(e){var t=new RegExp("^\\d+$");""!==e&&t.test(e)&&(e=parseInt(e.toString().replace(/\s/g,""))),o({webinarId:e})},oe=function(e){o({hostId:e})},ne=function(e){o({title:e})},ae=function(e){o({description:e})},ie=function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e);if(t.getTime()<n.getTime()){o({startDate:e});var a=new Date(A);if(n.getTime()>=a.getTime()){var i=new Date(e);1===N?(i.setDate(i.getDate()+6*S),he(_()(i).format("YYYY-MM-DD HH:mm:ss"))):2===N?(i.setDate(i.getDate()+7*S*6),he(_()(i).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(i.setMonth(i.getMonth()+6*S),he(_()(i).format("YYYY-MM-DD HH:mm:ss")))}}},ce=function(e){o({duration:e})},re=function(e){o({timezone:e});var t=new Date((new Date).toLocaleString("en-US",{timeZone:e})),n=""+(t.getMonth()+1),a=""+t.getDate(),i=t.getFullYear(),c=""+t.getHours(),r=""+t.getMinutes(),l=""+t.getSeconds();n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),c.length<2&&(c="0"+c),r.length<2&&(r="0"+r),l.length<2&&(l="0"+l),bpZoomMeetingBlock.wp_date_time=[i,n,a].join("-")+"T"+[c,r,l].join(":");var b=new Date(y);0===u.length&&b<t&&o({startDate:bpZoomMeetingBlock.wp_date_time})},le=function(e){o({password:e})},be=function(e){o({registration:e})},se=function(e){o({registration_type:parseInt(e)})},de=function(e){o({hostVideo:e})},me=function(e){o({panelistsVideo:e})},ue=function(e){o({practiceSession:e})},_e=function(e){o({authentication:e})},pe=function(e){o({autoRecording:e})},ge=function(e){o({webinarFormType:e})},ke=function(e){o({recurring:e})},fe=function(e){o({recurrence:parseInt(e)}),1==e?(ee.setDate(X.getDate()+6*S),he(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):2==e?(ee.setDate(X.getDate()+7*S*6),he(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):3==e&&(ee.setMonth(X.getMonth()+6*S),he(_()(ee).format("YYYY-MM-DD HH:mm:ss")))},ve=function(e){o({repeat_interval:e}),1===N?(ee.setDate(X.getDate()+6*e),he(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):2===N?(ee.setDate(X.getDate()+7*e*6),he(_()(ee).format("YYYY-MM-DD HH:mm:ss"))):3===N&&(ee.setMonth(X.getMonth()+6*e),he(_()(ee).format("YYYY-MM-DD HH:mm:ss")))},ye=function(e){o({end_times:parseInt(e)})},he=function(e){var t=new Date(y),n=new Date(e);t.getTime()<n.getTime()&&o({end_date_time:e})},we=function(e){var t=new Date,n=new Date(e);t.getTime()<n.getTime()&&o({current_occurrence_start_time:e})},je=function(e){o({current_occurrence_duration:e})},Oe=function(e){o({end_time_select:e})},Me=function(e){o({weekly_days:e})},ze=function(e){o({monthly_occurs_on:e})},Be=function(e){o({monthly_day:parseInt(e)})},Ze=function(e){o({monthly_week:e})},Ce=function(e){o({monthly_week_day:parseInt(e)})},De=function(e){for(var t in o({occurrences:e}),e){var n=new Date(bpZoomMeetingBlock.wp_date_time),a=new Date(e[t].start_time);if(n.getTime()<a.getTime()&&"deleted"!==e[t].status){ie(e[t].start_time);break}}},Ee=function(e){o({occurrence_edit:e})},xe=function(e){o({alt_hosts:e})},Ye=Object(b.__experimentalGetSettings)(),Pe=Object(i.useState)(!1),Te=a()(Pe,2),Ne=Te[0],Se=Te[1],Ue=Object(i.useState)(!1),Ae=a()(Ue,2),He=Ae[0],Ie=Ae[1],Fe=(Ye.formats.datetime,[]);if(Fe=2==n?[{label:bpZoomMeetingBlock.block_zoom_no_recordings,value:"none"},{label:bpZoomMeetingBlock.block_zoom_cloud,value:"cloud"},{label:bpZoomMeetingBlock.block_zoom_local,value:"local"}]:[{label:bpZoomMeetingBlock.block_zoom_no_recordings,value:"none"},{label:bpZoomMeetingBlock.block_zoom_local,value:"local"}],1===N){K=Object(c.__)("day","buddyboss-pro"),J=[];for(var Le=1;Le<=15;Le++)J.push({label:Le,value:Le})}else if(2===N){K=Object(c.__)("week","buddyboss-pro"),J=[];for(var Re=1;Re<=12;Re++)J.push({label:Re,value:Re})}else if(3===N){K=Object(c.__)("month","buddyboss-pro"),J=[];for(var Ve=1;Ve<=3;Ve++)J.push({label:Ve,value:Ve})}var qe=function(e){var t;if(Object(m.isUndefined)(e.host_name)||(t=e.host_name,o({hostDisplayName:t})),Object(m.isUndefined)(e.host_email)||oe(e.host_email),!Object(m.isUndefined)(e.webinar)){var n=e.webinar;if(Object(m.isUndefined)(n.id)||te(n.id),Object(m.isUndefined)(n.host_id)||oe(n.host_id),Object(m.isUndefined)(n.topic)||ne(n.topic),Object(m.isUndefined)(n.agenda)||ae(n.agenda),Object(m.isUndefined)(n.timezone)||re(n.timezone),Object(m.isUndefined)(n.start_time)||o({startDate:n.start_time}),Object(m.isUndefined)(n.duration)?!Object(m.isUndefined)(n.occurrences)&&n.occurrences.length&&ce(n.occurrences[0].duration):ce(n.duration),Object(m.isUndefined)(n.password)||le(n.password),!Object(m.isUndefined)(n.type)&&[6,9].includes(n.type)?ke(!0):ke(!1),!Object(m.isUndefined)(n.occurrences)&&n.occurrences.length&&De(n.occurrences),!Object(m.isUndefined)(n.recurrence)){var a=n.recurrence;Object(m.isUndefined)(a.type)||fe(a.type),Object(m.isUndefined)(a.repeat_interval)||ve(a.repeat_interval),Object(m.isUndefined)(a.end_times)||(ye(a.end_times),Oe("times")),Object(m.isUndefined)(a.end_date_time)||(he(a.end_date_time),Oe("date")),Object(m.isUndefined)(a.weekly_days)||Me(a.weekly_days.split(",")),Object(m.isUndefined)(a.monthly_day)||(Be(a.monthly_day),ze("day")),Object(m.isUndefined)(a.monthly_week)||(Ze(a.monthly_week),ze("week")),Object(m.isUndefined)(a.monthly_week_day)||(Ce(a.monthly_week_day),ze("week"))}if(!Object(m.isUndefined)(n.settings)){var i=n.settings;Object(m.isUndefined)(i.alternative_hosts)||xe(i.alternative_hosts),Object(m.isUndefined)(i.approval_type)||0!=i.approval_type||be(!0),Object(m.isUndefined)(i.registration_type)||se(i.registration_type),Object(m.isUndefined)(i.host_video)||de(i.host_video),Object(m.isUndefined)(i.panelists_video)||me(i.panelists_video),Object(m.isUndefined)(i.practice_session)||ue(i.practice_session),Object(m.isUndefined)(i.on_demand)||function(e){o({onDemand:e})}(i.on_demand),Object(m.isUndefined)(i.meeting_authentication)||_e(i.meeting_authentication),Object(m.isUndefined)(i.auto_recording)||pe(i.auto_recording)}}};return Object(i.createElement)(i.Fragment,null,""===x?Object(i.createElement)(s.Placeholder,{icon:"video-alt2",className:"bb-input-container webinar_block_title",label:bpZoomMeetingBlock.block_zoom_webinar,instructions:bpZoomMeetingBlock.block_zoom_create_add_webinar},Object(i.createElement)(s.Button,{isSecondary:!0,onClick:function(){ge("create")}},bpZoomMeetingBlock.block_create_webinar),Object(i.createElement)(s.Button,{isSecondary:!0,onClick:function(){ge("existing")}},bpZoomMeetingBlock.block_add_webinar)):"","existing"===x?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.Placeholder,{icon:"video-alt2",className:"bb-meeting-id-input-container",label:bpZoomMeetingBlock.block_add_webinar},Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_webinar_id,value:u,className:"components-placeholder__input bb-meeting-id-wrap",placeholder:bpZoomMeetingBlock.block_enter_webinar_id,onChange:te}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-id":u};g(n).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i>',wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_webinar_sync,{isDismissible:!0}),qe(e),ge("create"),o({external_webinar:!0});var n=wp.data.select("core/editor");n.isEditedPostSaveable()&&(!n.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(n.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},bpZoomMeetingBlock.block_zoom_save),u<1||""===u?Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){ge("")}},bpZoomMeetingBlock.block_zoom_cancel):""))):"","create"===x?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.Placeholder,{icon:"video-alt2",label:P?bpZoomMeetingBlock.block_existing_webinar:bpZoomMeetingBlock.block_create_webinar,className:"bp-meeting-block-create"},u>1||""!==u?Object(i.createElement)(s.Button,{isLink:!0,onClick:function(e){var t=e.currentTarget;t.innerHTML='<i class="bb-icon-l bb-icon-spinner animate-spin"></i> '+bpZoomMeetingBlock.block_zoom_sync,t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-id":u};g(o).then((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+bpZoomMeetingBlock.block_zoom_sync,wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_webinar_sync,{isDismissible:!0}),qe(e),ge("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())})).catch((function(e){t.removeAttribute("disabled"),t.innerHTML='<i class="bb-icon-l bb-icon-bolt"></i> '+bpZoomMeetingBlock.block_zoom_sync,wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}))}},Object(i.createElement)("i",{className:"bb-icon-l bb-icon-bolt"})," ",bpZoomMeetingBlock.block_zoom_sync):"",Object(i.createElement)(s.TextControl,{label:"",type:"hidden",value:u}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_title,value:f,onChange:ne}),Object(i.createElement)(s.BaseControl,{label:bpZoomMeetingBlock.block_zoom_when,className:"bb-meeting-time-wrap"},Object(i.createElement)("time",{dateTime:Object(b.date)("c",y)},Object(i.createElement)(s.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Se((function(e){return!e}))}},_()(y).format("MMMM DD, YYYY h:mm a")),Ne&&Object(i.createElement)(s.Popover,{onClose:Se.bind(null,!1)},Object(i.createElement)(s.DateTimePicker,{currentDate:y,onChange:ie,is12Hour:!0})))),Object(i.createElement)("div",null,Object(i.createElement)(k,{timezone:w,options:bpZoomMeetingBlock.timezones,setTimezone:re,clientId:t})),Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_auto_recording,value:E,options:Fe,onChange:pe,className:"bb_inline_selectBox"}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{className:"submit-meeting",isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":u,"bp-zoom-webinar-start-date":y,"bp-zoom-webinar-timezone":w,"bp-zoom-webinar-duration":h,"bp-zoom-webinar-password":j,"bp-zoom-webinar-recording":E,"bp-zoom-webinar-alt-host-ids":Y,"bp-zoom-webinar-title":f,"bp-zoom-webinar-description":v,"bp-zoom-webinar-type":5};T&&(1===N?("date"===H?o["bp-zoom-webinar-end-date-time"]=A:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=1,o["bp-zoom-webinar-end-time-select"]=H,o["bp-zoom-webinar-repeat-interval"]=S,o["bp-zoom-webinar-type"]=9):2===N?(I&&(o["bp-zoom-webinar-weekly-days"]=I),"date"===H?o["bp-zoom-webinar-end-date-time"]=A:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=2,o["bp-zoom-webinar-end-time-select"]=H,o["bp-zoom-webinar-repeat-interval"]=S,o["bp-zoom-webinar-type"]=9):3===N?("day"===F?o["bp-zoom-webinar-monthly-day"]=L:"week"===F&&(o["bp-zoom-webinar-monthly-week"]=R,o["bp-zoom-webinar-monthly-week-day"]=V),"date"===H?o["bp-zoom-webinar-end-date-time"]=A:o["bp-zoom-webinar-end-times"]=U,o["bp-zoom-webinar-recurrence"]=3,o["bp-zoom-webinar-monthly-occurs-on"]=F,o["bp-zoom-webinar-end-time-select"]=H,o["bp-zoom-webinar-repeat-interval"]=S,o["bp-zoom-webinar-type"]=9):o["bp-zoom-webinar-type"]=6),O&&(o["bp-zoom-webinar-registration"]=1,8===o["bp-zoom-webinar-type"]&&(o["bp-zoom-webinar-registration-type"]=M)),z&&(o["bp-zoom-webinar-host-video"]=1),B&&(o["bp-zoom-webinar-panelists-video"]=1),C&&(o["bp-zoom-webinar-on-demand"]=1),D&&(o["bp-zoom-webinar-authentication"]=1),Z&&(o["bp-zoom-webinar-practice-session"]=1),wp.ajax.send("zoom_webinar_block_add",{data:o,success:function(e){e.webinar.id&&te(e.webinar.id),void 0!==e.webinar.occurrences&&e.webinar.occurrences.length&&De(e.webinar.occurrences),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_webinar_updated,{isDismissible:!0}),ge("create");var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_webinar_save),u<1||""===u?Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){ge("")}},bpZoomMeetingBlock.block_zoom_cancel):Object(i.createElement)(s.Button,{isDestructive:!0,onClick:function(e){var o=e.target;if(confirm("Are you sure you want to delete this webinar?","buddyboss-pro")){o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":u};wp.ajax.send("zoom_webinar_block_delete_webinar",{data:n,success:function(){wp.data.dispatch("core/block-editor").removeBlock(t),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_webinar_deleted,{isDismissible:!0});var e=wp.data.select("core/editor");e.isEditedPostSaveable()&&(!e.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(e.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}}},bpZoomMeetingBlock.block_zoom_delete)))):"","create"===x?Object(i.createElement)(r.InspectorControls,null,Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_zoom_settings,initialOpen:!0},Object(i.createElement)(s.TextareaControl,{label:bpZoomMeetingBlock.block_zoom_description,value:v,onChange:ae}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_passcode,onChange:le,value:j}),Object(i.createElement)(s.TextControl,{type:"number",label:bpZoomMeetingBlock.block_zoom_duration,onChange:ce,value:h}),Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_default_host,type:"text",disabled:!0,value:p}),2==n?Object(i.createElement)(s.TextControl,{label:bpZoomMeetingBlock.block_zoom_alt_hosts,onChange:xe,value:Y,placeholder:bpZoomMeetingBlock.block_zoom_example,help:bpZoomMeetingBlock.block_zoom_email_enter}):"",Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_start_video,checked:z,onChange:de,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_start_video_par,checked:B,onChange:me,className:"bb-checkbox-wrap"}),2!=n||l?"":Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_zoom_require_reg,checked:O,onChange:be,className:"bb-checkbox-wrap"}),O&&T?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.RadioControl,{selected:M,options:[{label:bpZoomMeetingBlock.block_att_any,value:1},{label:bpZoomMeetingBlock.block_att_each,value:2},{label:bpZoomMeetingBlock.block_att_choose,value:3}],onChange:se})):""),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_enable_practice_session,checked:Z,onChange:ue,className:"bb-checkbox-wrap"}),Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_only_auth,checked:D,onChange:_e,className:"bb-checkbox-wrap"})),Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_recurring_options,initialOpen:!1},Object(i.createElement)(s.CheckboxControl,{label:bpZoomMeetingBlock.block_recurring_webinar,checked:T,onChange:ke}),!0===T?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_recurrence,value:N,options:[{label:bpZoomMeetingBlock.block_zoom_week_daily,value:1},{label:bpZoomMeetingBlock.block_zoom_week_weekly,value:2},{label:bpZoomMeetingBlock.block_zoom_week_monthly,value:3}],onChange:fe}),Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_repeat_every,value:S,options:J,onChange:ve,help:K}),2===N?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_days,value:I,options:[{label:bpZoomMeetingBlock.block_zoom_sunday,value:1},{label:bpZoomMeetingBlock.block_zoom_monday,value:2},{label:bpZoomMeetingBlock.block_zoom_tuesday,value:3},{label:bpZoomMeetingBlock.block_zoom_wednesday,value:4},{label:bpZoomMeetingBlock.block_zoom_thursday,value:5},{label:bpZoomMeetingBlock.block_zoom_friday,value:6},{label:bpZoomMeetingBlock.block_zoom_saturday,value:7}],onChange:Me,multiple:!0}):"",3===N?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_occures,value:F,options:[{label:bpZoomMeetingBlock.block_zoom_day_month,value:"day"},{label:bpZoomMeetingBlock.block_zoom_week_month,value:"week"}],onChange:ze}),"day"===F?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_day,value:L,options:[{label:Object(c.__)("1","buddyboss-pro"),value:1},{label:Object(c.__)("2","buddyboss-pro"),value:2},{label:Object(c.__)("3","buddyboss-pro"),value:3},{label:Object(c.__)("4","buddyboss-pro"),value:4},{label:Object(c.__)("5","buddyboss-pro"),value:5},{label:Object(c.__)("6","buddyboss-pro"),value:6},{label:Object(c.__)("7","buddyboss-pro"),value:7},{label:Object(c.__)("8","buddyboss-pro"),value:8},{label:Object(c.__)("9","buddyboss-pro"),value:9},{label:Object(c.__)("10","buddyboss-pro"),value:10},{label:Object(c.__)("11","buddyboss-pro"),value:11},{label:Object(c.__)("12","buddyboss-pro"),value:12},{label:Object(c.__)("13","buddyboss-pro"),value:13},{label:Object(c.__)("14","buddyboss-pro"),value:14},{label:Object(c.__)("15","buddyboss-pro"),value:15},{label:Object(c.__)("16","buddyboss-pro"),value:16},{label:Object(c.__)("17","buddyboss-pro"),value:17},{label:Object(c.__)("18","buddyboss-pro"),value:18},{label:Object(c.__)("19","buddyboss-pro"),value:19},{label:Object(c.__)("20","buddyboss-pro"),value:20},{label:Object(c.__)("21","buddyboss-pro"),value:21},{label:Object(c.__)("22","buddyboss-pro"),value:22},{label:Object(c.__)("23","buddyboss-pro"),value:23},{label:Object(c.__)("24","buddyboss-pro"),value:24},{label:Object(c.__)("25","buddyboss-pro"),value:25},{label:Object(c.__)("26","buddyboss-pro"),value:26},{label:Object(c.__)("27","buddyboss-pro"),value:27},{label:Object(c.__)("28","buddyboss-pro"),value:28},{label:Object(c.__)("29","buddyboss-pro"),value:29},{label:Object(c.__)("30","buddyboss-pro"),value:30},{label:Object(c.__)("31","buddyboss-pro"),value:31}],onChange:Be,help:bpZoomMeetingBlock.block_zoom_of_month}):Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{value:R,options:[{label:bpZoomMeetingBlock.block_zoom_first,value:1},{label:bpZoomMeetingBlock.block_zoom_second,value:2},{label:bpZoomMeetingBlock.block_zoom_third,value:3},{label:bpZoomMeetingBlock.block_zoom_fourth,value:4},{label:bpZoomMeetingBlock.block_zoom_last,value:-1}],onChange:Ze}),Object(i.createElement)(s.SelectControl,{value:V,options:[{label:bpZoomMeetingBlock.block_zoom_sunday,value:1},{label:bpZoomMeetingBlock.block_zoom_monday,value:2},{label:bpZoomMeetingBlock.block_zoom_tuesday,value:3},{label:bpZoomMeetingBlock.block_zoom_wednesday,value:4},{label:bpZoomMeetingBlock.block_zoom_thursday,value:5},{label:bpZoomMeetingBlock.block_zoom_friday,value:6},{label:bpZoomMeetingBlock.block_zoom_saturday,value:7}],onChange:Ce,help:bpZoomMeetingBlock.block_zoom_of_month}))):"",4!==N?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_end_by,value:H,options:[{label:bpZoomMeetingBlock.block_zoom_date,value:"date"},{label:bpZoomMeetingBlock.block_zoom_occurrences,value:"times"}],onChange:Oe}),"date"==H?Object(i.createElement)("time",{dateTime:Object(b.date)("c",A)},Object(i.createElement)(s.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return Ie((function(e){return!e}))}},_()(A).format("MMMM DD, YYYY")),He&&Object(i.createElement)(s.Popover,{onClose:Ie.bind(null,!1)},Object(i.createElement)(s.DatePicker,{currentDate:A,onChange:he}))):"","times"==H?Object(i.createElement)(s.SelectControl,{label:bpZoomMeetingBlock.block_zoom_end_after,value:U,help:bpZoomMeetingBlock.block_zoom_occurrences_low,options:[{label:Object(c.__)("1","buddyboss-pro"),value:1},{label:Object(c.__)("2","buddyboss-pro"),value:2},{label:Object(c.__)("3","buddyboss-pro"),value:3},{label:Object(c.__)("4","buddyboss-pro"),value:4},{label:Object(c.__)("5","buddyboss-pro"),value:5},{label:Object(c.__)("6","buddyboss-pro"),value:6},{label:Object(c.__)("7","buddyboss-pro"),value:7},{label:Object(c.__)("8","buddyboss-pro"),value:8},{label:Object(c.__)("9","buddyboss-pro"),value:9},{label:Object(c.__)("10","buddyboss-pro"),value:10},{label:Object(c.__)("11","buddyboss-pro"),value:11},{label:Object(c.__)("12","buddyboss-pro"),value:12},{label:Object(c.__)("13","buddyboss-pro"),value:13},{label:Object(c.__)("14","buddyboss-pro"),value:14},{label:Object(c.__)("15","buddyboss-pro"),value:15},{label:Object(c.__)("16","buddyboss-pro"),value:16},{label:Object(c.__)("17","buddyboss-pro"),value:17},{label:Object(c.__)("18","buddyboss-pro"),value:18},{label:Object(c.__)("19","buddyboss-pro"),value:19},{label:Object(c.__)("20","buddyboss-pro"),value:20}],onChange:ye}):""):""):""),!0===T&&q.length?Object(i.createElement)(s.PanelBody,{title:bpZoomMeetingBlock.block_zoom_occurrences,initialOpen:!1},q.map((function(e){var t=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e.start_time);return t.getTime()>n.getTime()||"deleted"===e.status?"":Object(i.createElement)(i.Fragment,{key:e.occurrence_id},Object(i.createElement)(s.__experimentalText,{as:"p"},_()(e.start_time).format("MMMM DD, YYYY h:mm a")),Object(i.createElement)(s.Button,{isLink:!0,className:"edit-occurrences-button",onClick:function(){var t;Ee(!0),o({current_occurrence:t=e}),je(t.duration),we(t.start_time)}},bpZoomMeetingBlock.block_zoom_edit),Object(i.createElement)(s.Button,{isLink:"true",className:"edit-occurrences-button",onClick:function(t){var o=t.target;if(!confirm(bpZoomMeetingBlock.delete_occurrence_confirm_str))return!1;o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":u,"bp-zoom-webinar-occurrence-id":e.occurrence_id};wp.ajax.send("zoom_webinar_block_delete_occurrence",{data:n,success:function(){De(q.filter((function(t){return t.occurrence_id!==e.occurrence_id}))),Ee(!1),o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_zoom_occurrence_del,{isDismissible:!0});var t=wp.data.select("core/editor");t.isEditedPostSaveable()&&(!t.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(t.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(o.removeAttribute("disabled"),void 0!==e.errors)for(var t in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[t].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_zoom_delete),W&&Q&&Q.occurrence_id===e.occurrence_id?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(s.DateTimePicker,{is12Hour:!0,currentDate:$,onChange:we}),Object(i.createElement)(s.TextControl,{type:"number",label:bpZoomMeetingBlock.block_zoom_duration,onChange:je,value:G}),Object(i.createElement)(s.BaseControl,{className:"bb-buttons-wrap"},Object(i.createElement)(s.Button,{isPrimary:!0,className:"submit-meeting",onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_webinar_nonce,"bp-zoom-webinar-zoom-id":u,"bp-zoom-webinar-occurrence-id":Q.occurrence_id,"bp-zoom-webinar-start-time":$,"bp-zoom-webinar-timezone":w,"bp-zoom-webinar-duration":G,"bp-zoom-webinar-recording":E,"bp-zoom-webinar-alt-host-ids":Y};z&&(o["bp-zoom-webinar-host-video"]=1),B&&(o["bp-zoom-webinar-panelists-video"]=1),Z&&(o["bp-zoom-webinar-practice-session"]=1),C&&(o["bp-zoom-webinar-on-demand"]=1),D&&(o["bp-zoom-webinar-authentication"]=1),wp.ajax.send("zoom_webinar_block_update_occurrence",{data:o,success:function(){for(var e in q)if(q[e].occurrence_id===Q.occurrence_id){q[e].duration=G,q[e].start_time=$;break}De(q),Ee(!1),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",bpZoomMeetingBlock.block_webinar_updated,{isDismissible:!0});var o=wp.data.select("core/editor");o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},bpZoomMeetingBlock.block_zoom_save),Object(i.createElement)(s.Button,{isTertiary:!0,onClick:function(){Ee(!1)}},bpZoomMeetingBlock.block_zoom_cancel))):"")}))):""):"")}});var y=function(){var e=wp.data.select("core/block-editor").getBlocks(),t=[],o=0;for(o in e)e[o].isValid&&"bp-zoom-meeting/create-meeting"===e[o].name&&t.push(e[o]);return t},h=function(){var e=wp.data.select("core/block-editor").getBlocks(),t=[],o=0;for(o in e)e[o].isValid&&"bp-zoom-meeting/create-webinar"===e[o].name&&t.push(e[o]);return t};wp.domReady((function(){jQuery(document).on("click",".editor-post-publish-button",(function(e){e.stopPropagation(),e.preventDefault();var t=y();if(t.length)for(var o in t)jQuery("#block-"+t[o].clientId).find(".submit-meeting").trigger("click");var n=h();if(n.length)for(var a in n)jQuery("#block-"+n[a].clientId).find(".submit-meeting").trigger("click")}))}));var w=function(e){return e.clientId},j=!1,O=setInterval((function(){var e,t,o;(document.getElementById("post-title-0")||document.getElementById("post-title-1"))&&(j=!0,wp.data.subscribe((e=wp.data.select("core/block-editor").getBlocks,t=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object(m.differenceBy)(e,t,w),a=Object(m.differenceBy)(t,e,w);if(t.length==e.length&&o){for(var i in a){var c=a[i],r="blocks.transformed.from."+Object(m.camelCase)(c.name);Object(d.doAction)(r,c)}for(var i in n){var l=n[i],b="blocks.transformed.to."+Object(m.camelCase)(l.name);Object(d.doAction)(b,l)}}for(var i in n){var s=n[i],u="blocks.added."+Object(m.camelCase)(s.name);Object(d.doAction)(u,s)}for(var i in a){var _=a[i],p="blocks.removed."+Object(m.camelCase)(_.name);Object(d.doAction)(p,_)}},o=e(),function(){var n=e();n.length!==o.length?(t(n,o),o=n):Object(m.differenceBy)(n,o,w).length&&(t(n,o,Object(m.differenceBy)(n,o,w)),o=n)}))),j&&clearInterval(O)}),500);Object(d.addAction)("blocks.added.bpZoomMeetingCreateMeeting","bpZoomMeetingCreateMeeting/addBlock",(function(e){e.attributes.meetingId="",e.attributes.id=""})),Object(d.addAction)("blocks.added.bpZoomMeetingCreateWebinar","bpZoomMeetingCreateWebinar/addBlock",(function(e){e.attributes.webinarId="",e.attributes.id=""}))}]);