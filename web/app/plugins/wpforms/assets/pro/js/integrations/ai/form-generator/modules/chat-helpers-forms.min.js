export default function(n){const t={min:54,max:95},r={init(){n.input.addEventListener("keydown",n.modeHelpers.keyDown),n.input.addEventListener("keyup",n.modeHelpers.resizeInput),n.sessionId&&(WPFormsAIFormGenerator.state.chatStart=!0,WPFormsAIFormGenerator.main.el.$templateCard.next(".selected").removeClass("selected"))},keyDown(e){n.preventResizeInput="Enter"===e.code&&!e.shiftKey,n.preventResizeInput&&(e.preventDefault(),r.setInputHeight(t.min))},resizeInput(){var e;n.preventResizeInput||(n.input.style.height="",n.input.style.paddingTop="10px",n.input.style.paddingBottom="10px",e=n.input.scrollHeight,e=Math.min(e,t.max),e=Math.max(e,t.min),r.setInputHeight(e))},resetInput(){r.resizeInput()},setInputHeight(e){e<=t.min&&(n.input.style.paddingTop="",n.input.style.paddingBottom=""),n.input.style.height=e+"px",n.style.setProperty("--wpforms-ai-chat-input-height",e+"px")},getAnswer(e){var t;return e?(t=Math.floor(Math.random()*n.modeStrings.footer.length),t=n.modeStrings.footer[t],`
				<h4>${e.explanation||(e.form_title??"")}</h4>
				<span>${t}</span>
			`):""},getAnswerButtonsPre(){return`
				<button type="button" class="wpforms-ai-chat-use-form wpforms-ai-chat-answer-action wpforms-btn-sm wpforms-btn-orange" >
					<span>${n.modeStrings.useForm}</span>
				</button>
			`},addedAnswer(e){r.updateInactiveAnswers()},setActiveAnswer(e){r.updateInactiveAnswers(),e.querySelector(".wpforms-chat-item-content").setAttribute("title","")},updateInactiveAnswers(){n.messageList.querySelectorAll(".wpforms-chat-item-answer:not(.active) .wpforms-chat-item-content").forEach(e=>{e.setAttribute("title",n.modeStrings.inactiveAnswerTitle)})},isWelcomeScreen(){return!0},getMessageInputField(){return`<textarea placeholder="${n.modeStrings.placeholder}"></textarea>`},sanitizeResponse(e){return e.explanation&&(e.explanation=wpf.sanitizeHTML(e.explanation,wpforms_builder.allowed_label_html_tags)),e}};return r}