/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
!function(d){"use strict";window.BBLMS={init:function(){this.toggleTheme(),this.expandQuizzes(),this.learnDashSidePanel(),this.lms_user_profile_js(),this.lms_single_course(),this.course_archive_js(),this.quizDetails(),this.quizUpload(),this.courseViewCookie(),this.bbStickyLifterSidebar(),this.StyleInputQuestion(),this.singleLesson(),this.singleTopic(),this.singleQuiz(),this.collapseTrial(),this.toPricingTable(),this.dashboardNav(),this.showMoreParticipants(),this.progressIndicatorRound(),this.switchLdGridList()},switchLdGridList:function(){var s=d("body .course-dir-list .bb-course-items:not(.is-cover)");d(document).on("click",".grid-filters .layout-view-course:not(.active)",function(e){if(e.preventDefault(),s=d(e.target).closest("form").find(".bb-course-items:not(.is-cover)"),void 0!==d(this).parent().attr("data-view")&&"llms-course"===d(this).parent().attr("data-view")){var t=d(this).parents("form");BBLMS.ajax_request&&(BBLMS.ajax_request.abort(),d(".courses-nav").find(".bb-icon-loader").remove()),s=d(this).parents("form").find(".bb-course-items:not(.is-cover)"),d(this).hasClass("layout-list-view")?(t.find(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(this).addClass("active"),s.addClass("list-view"),s.addClass("bb-list"),d("body").hasClass("post-type-archive-llms_membership")?BBLMS.ajax_request=d.ajax({method:"POST",url:bs_data.ajaxurl,nonce:bs_data.nonce_list_grid,data:"action=buddyboss_llms_save_view&option=bb_layout_view&object="+d(this).parent().attr("data-view")+"&type=list&nonce="+bs_data.nonce_list_grid,success:function(e){}}):BBLMS.ajax_request=d.ajax({method:"POST",url:bs_data.ajaxurl,nonce:bs_data.nonce_list_grid,data:"action=buddyboss_llms_save_view&option=bb_layout_view&object="+d(this).parent().attr("data-view")+"&type=list&nonce="+bs_data.nonce_list_grid,success:function(e){}})):(t.find(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(this).addClass("active"),s.addClass("grid-view"),s.addClass("bb-grid"),d("body").hasClass("post-type-archive-llms_membership")?BBLMS.ajax_request=d.ajax({method:"POST",url:bs_data.ajaxurl,nonce:bs_data.nonce_list_grid,data:"action=buddyboss_llms_save_view&option=bb_layout_view&object="+d(this).parent().attr("data-view")+"&type=grid&nonce="+bs_data.nonce_list_grid,success:function(e){}}):BBLMS.ajax_request=d.ajax({method:"POST",url:bs_data.ajaxurl,nonce:bs_data.nonce_list_grid,data:"action=buddyboss_llms_save_view&option=bb_layout_view&object="+d(this).parent().attr("data-view")+"&type=grid&nonce="+bs_data.nonce_list_grid,success:function(e){}}))}})},showMoreParticipants:function(){var t=d(".llms-course-members-list .llms-course-sidebar-heading .llms-count").text(),s=2,a=d(".llms-course-members-list #buddyboss_theme_llms_course_participants_course_id").val(),i=d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms i"),o=d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms");d(".llms-course-members-list").on("click",".bb-course-member-wrap .lme-more--llms",function(e){e.preventDefault(),d(this).hasClass("loading-members")||(d(this).addClass("loading-members"),i.removeClass("bb-icon-angle-down"),i.addClass("bb-icon-spin"),i.addClass("animate-spin"),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_get_course_participants&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&total="+t+"&page="+s+"&course="+a,success:function(e){d(".llms-course-members-list .bb-course-member-wrap .course-members-list.course-members-list-extra").show(),d(".llms-course-members-list .bb-course-member-wrap .course-members-list-extra").append(e.data.html),d(window).trigger("resize"),"false"===e.data.show_more&&d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms").remove(),s=e.data.page,d("html, body").animate({scrollTop:d(window).scrollTop()+150},300),i.addClass("bb-icon-angle-down"),i.removeClass("bb-icon-spin"),i.removeClass("animate-spin"),o.removeClass("loading-members")}}))})},fetchCourses:function(){var a=d("#bb-courses-directory-form");"undefined"!=typeof target&&0<d(target).length&&(a=d(target).closest("form.bb-courses-directory"));for(var e=!1,t=["filter-categories","filter-instructors","search"],s=0;s<t.length;s++){var i=BBGetUrlParameter(window.location.search,t[s]),o=a.find('[name="'+t[s]+'"]').val();if(i!==o)switch(t[s]){case"filter-categories":case"filter-instructors":!i&&"all"===o||(e=!0);break;default:e=!0}if(e)break}e&&a.find('[name="current_page"]').val(1);var r=a.serialize();if(0<bs_data.lifterlms.course_category_id)var n=bs_data.lifterlms.course_category_url;else n=bs_data.lifterlms.course_archive_url;return a.hasClass("bb-elementor-widget")&&(n=a.data("current_page_url")),r+="&request_url="+encodeURIComponent(n),BBLMS.ajax_request=d.ajax({method:"GET",url:bs_data.ajaxurl,data:r+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&course_category_url="+bs_data.lifterlms.course_category_url+"&is_course_category="+bs_data.lifterlms.is_course_category+"&course_category_id="+bs_data.lifterlms.course_category_id+"&course_category_name="+bs_data.lifterlms.course_category_name,success:function(e){var t=a.find('[name="current_page"]').val();if(isNaN(t)&&(t=1),1<t&&!d("body").hasClass("bp-user")&&(n+="page/"+t+"/"),n+="?"+r,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:a.find('[name="type"]').val()},"",n),a.find(".bs-dir-list").html(e.data.html),a.find("li.selected a span").text(e.data.count),e.data.scopes)for(var s in e.data.scopes)a.find("li#courses-"+s+" a span").text(e.data.scopes[s]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},fetchMemberships:function(){for(var i=d("#bb-membership-directory-form"),e=!1,t=["filter-categories","filter-instructors","search"],s=0;s<t.length;s++){var a=BBGetUrlParameter(window.location.search,t[s]),o=i.find('[name="'+t[s]+'"]').val();if(a!==o)switch(t[s]){case"filter-categories":case"filter-instructors":!a&&"all"===o||(e=!0);break;default:e=!0}if(e)break}e&&i.find('[name="current_page"]').val(1);var r=i.serialize(),n="grid";return i.find(".layout-list-view").hasClass("active")&&(n="list"),r+="&view="+n,d.ajax({method:"GET",url:bs_data.ajaxurl,data:r+"&action=buddyboss_lms_get_memberships&_wpnonce="+bs_data.lifterlms.nonce_get_memberships,success:function(e){var t=bs_data.lifterlms.course_membership_url,s=i.find('[name="current_page"]').val();if(isNaN(s)&&(s=1),1<s&&(t+="page/"+s+"/"),t+="?"+r,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:i.find('[name="type"]').val()},"",t),i.find(".bs-dir-list").html(e.data.html),i.find("li.selected a span").text(e.data.count),e.data.scopes)for(var a in e.data.scopes)i.find("li#courses-"+a+" a span").text(e.data.scopes[a]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},fetchCoursesPagination:function(e){var a=d("#bb-courses-directory-form");void 0!==e&&0<d(e).length&&(a=d(e).closest("form.bb-courses-directory"));var i=a.serialize();if(0<bs_data.lifterlms.course_category_id)var o=bs_data.lifterlms.course_category_url;else o=bs_data.lifterlms.course_archive_url;a.hasClass("bb-elementor-widget")&&(o=a.data("current_page_url"));var t="list";return a.find(".layout-grid-view").hasClass("active")&&(t="grid"),i+="&view="+t+"&request_url="+encodeURIComponent(o),d.ajax({method:"GET",url:bs_data.ajaxurl,data:i+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&course_category_url="+bs_data.lifterlms.course_category_url+"&is_course_category="+bs_data.lifterlms.is_course_category+"&course_category_id="+bs_data.lifterlms.course_category_id+"&course_category_name="+bs_data.lifterlms.course_category_name,success:function(e){var t=a.find('[name="current_page"]').val();if(isNaN(t)&&(t=1),1<t&&!d("body").hasClass("bp-user")&&(o+="page/"+t+"/"),o+="?"+i,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:a.find('[name="type"]').val()},"",o),a.find(".bs-dir-list").html(e.data.html),a.find("li.selected a span").text(e.data.count),e.data.scopes)for(var s in e.data.scopes)a.find("li#courses-"+s+" a span").text(e.data.scopes[s]).show();d(".courses-nav").find(".bb-icon-loader").remove(),d("html, body").animate({scrollTop:a.offset().top-150},400)}}),!1},course_archive_js:function(){d(document).on("change","#bb-courses-directory-form input[type=checkbox]",function(e){e.preventDefault(),window.BBLMS.fetchCourses()}),window.onpopstate=function(e){if(e.state&&(!!e.state.hasOwnProperty("bblms_has_changes")&&e.state.bblms_has_changes)){var t=d("#bb-courses-directory-form");t.find(".bs-dir-list").html(e.state.courses_html),t.find('[name="type"]').val(e.state.type),t.find(".component-navigation > li").each(function(){d(this).removeClass("selected"),BBGetUrlParameter(d(this).find(" > a").attr("href"),"type")===e.state.type&&d(this).addClass("selected")})}},d(document).on("change","#bb-courses-directory-form [name='orderby'], #bb-courses-directory-form [name='filter-categories'], #bb-courses-directory-form [name='filter-instructors']",function(e){e.preventDefault(),window.BBLMS.fetchCourses(e.target)}),d(document).on("click","#bb-courses-directory-form .bs-sort-button",function(e){e.preventDefault(),e.currentTarget.classList.toggle("active"),d("#bs-courses-order-by").toggleClass("open")}),d(document).on("click","#bb-courses-directory-form .bb-lms-pagination a.page-numbers",function(e){e.preventDefault();var t=1,s=d(this).attr("href").split("/");if(0<s.length)for(var a=0;a<s.length;a++)if("page"===s[a]){t=s[a+1];break}d(this).closest("form").find('[name="current_page"]').val(t),window.BBLMS.fetchCoursesPagination(e.target)}),d(document).on("click","#bb-courses-directory-form .component-navigation a:not(.more-button)",function(e){e.preventDefault(),BBLMS.ajax_request&&BBLMS.ajax_request.abort(),d(this).closest(".component-navigation").find("> li").removeClass("selected"),d(this).closest(".component-navigation").find("> li a span").hide(),d(this).closest(".component-navigation").find("> li a span").text(""),d(this).closest("li").addClass("selected").append('<i class="bb-icon-loader animate-spin"></i>'),d(this).closest("li").find("> a span").text(""),d(this).closest("li").find("> a span").show();var t=BBGetUrlParameter(d(this).attr("href"),"type");d(this).closest("form").find('[name="type"]').val(t),d(this).closest("form").find('[name="current_page"]').val(1),window.BBLMS.fetchCourses(e.target)}),document.addEventListener("click",function(e){var t=d("#course-order-dropdown"),s=e.target;if(t===s&&t.contains(s))return!1;for(var a=d("#bb-courses-directory-form .bs-dropdown"),i=d("#bb-courses-directory-form .bs-dropdown-link"),o=0;o<i.length;o++)i[o]===s||i[o].contains(s)||i[o].classList.remove("active");for(o=0;o<a.length;o++)a[o]!=s.parentElement.nextElementSibling&&a[o].classList.remove("open")}),d("#bb-membership-directory-form").on("submit",function(e){return window.BBLMS.fetchMemberships(),!1}),d("form.bb-courses-directory").on("submit",function(e){return BBLMS.ajax_request&&BBLMS.ajax_request.abort(),window.BBLMS.fetchCourses(e.target),!1})},toggleTheme:function(){d(document).on("click","#bb-toggle-theme",function(e){e.preventDefault();var t="";d("body").hasClass("bb-dark-theme")?(d.removeCookie("bbtheme",{path:"/"}),d("body").removeClass("bb-dark-theme")):(d.cookie("bbtheme","dark",{path:"/"}),d("body").addClass("bb-dark-theme"),t="dark"),"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&toggle_theme_ajax.abort();var s={action:"buddyboss_lms_toggle_theme_color",color:t};"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&(toggle_theme_ajax=d.post(ajaxurl,s,function(e){}))})},expandQuizzes:function(){d(document).on("click",".llms-lesson-preview .ld-item-details",function(){var e=d(this).find(".ld-expand-button");e.hasClass("ld-expanded")?(e.removeClass("ld-expanded"),d(this).closest(".llms-lesson-preview").find(".quizzes_section_holder").slideUp()):(e.addClass("ld-expanded"),d(this).closest(".llms-lesson-preview").find(".quizzes_section_holder").slideDown())}),d(document).on("click",".llms-quiz-attempt-results .llms-quiz-attempt-question .llms-quiz-attempt-question-header",function(){d(this).parent().siblings(".llms-quiz-attempt-question").find(".llms-quiz-attempt-question-header").removeClass("expand-result"),d(this).hasClass("expand-result")?d(this).removeClass("expand-result"):d(this).addClass("expand-result")})},learnDashSidePanel:function(){d(document).on("click",".header-maximize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d.cookie("lessonpanel","closed",{path:"/"})}),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").removeClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").removeClass("lms-topic-sidebar-close"),d.removeCookie("lessonpanel",{path:"/"})}),d(window).width()<768&&(d("body").addClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close-sm")}),d(document).click(function(e){var t=d(".header-minimize-link");t.is(e.target)||0!==t.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})),d(window).on("resize",function(){d(window).width()<768&&d(document).click(function(e){var t=d(".header-minimize-link");t.is(e.target)||0!==t.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})})},lms_course_single_js:function(){d(document).on("click",".learndash-course-single-nav",function(e){e.preventDefault(),d("ul.learndash-course-single-main-nav").find("li.current.selected").removeClass("current").removeClass("selected");var t=d(e.currentTarget).closest("li");t.addClass("current"),t.addClass("selected");var s=d(e.currentTarget).data("tab"),a=d(".learndash-course-single-tab-content");d.each(a,function(e){var t=d(this);t.data("tab")==s?t.removeClass("hide"):t.addClass("hide")})})},lms_single_course:function(){function e(){var e=d(".bb-llms-banner").height(),t=d(".bb-thumbnail-preview .bb-preview-course-link-wrap");if(t.length)var s=t.height();else s=0;var a=e/2+s/2;820<d(window).width()&&d(".bb-single-course-sidebar.bb-preview-wrap").css({"margin-top":"-"+a+"px"})}function t(){var e=d("#main").width();d(".bb-llms-banner .bb-course-banner-info.container").width(e)}d(".bb-course-video-overlay").magnificPopup({fixedBgPos:!0,fixedContentPos:!0,items:{src:".bb_course_video_details",type:"inline"},callbacks:{open:function(){d.magnificPopup.instance.close=function(){d(".mfp-container .mfp-content .bb_course_video_details video".length)&&(d("video").trigger("pause"),d.magnificPopup.proto.close.call(this))}}}}),e(),t(),d(window).on("resize",function(){t(),e()}),d(".bb-toggle-panel").on("click",function(e){e.preventDefault(),setTimeout(function(){t()},300),setTimeout(function(){t()},600)})},lms_user_profile_js:function(){d(document).on("click",".bb-lms-user-profile-tab",function(e){e.preventDefault(),d("ul.bb-lms-user-profile-tabs").find("li.current.selected").removeClass("current").removeClass("selected");var t=d(e.currentTarget).closest("li");t.addClass("current"),t.addClass("selected");var s=d(e.currentTarget).data("tab"),a=d(".bb-lms-user-profile-tab-content");d.each(a,function(e){var t=d(this);t.data("tab")==s?t.removeClass("hide"):t.addClass("hide")})})},quizDetails:function(){if(d("#bb-lms-quiz-id").length){var e=d("#bb-lms-quiz-id").val();d("div.quiz_progress_container").insertBefore(d(".wpProQuiz_results .wpProQuiz_resultTable")),d("#wpProQuiz_"+e).on("learndash-quiz-init",function(){})}},ajaxCompleteProcess:function(){d(document).ajaxComplete(function(e,t,s){if(s.data&&""!=s.data){var a=s.data.split("&"),i="";for(var o in a)if(-1!=a[o].indexOf("action")){i=void 0!==(i=a[o].split("="))[1]?i[1]:"";break}if(""!=i&&"wp_pro_quiz_load_quiz_data"==i&&d(".wpProQuiz_resultTable").length){d(".bb_avg_progress").show();var r=new ProgressBar.Path("#bb_avg_shape",{duration:3e3,from:{color:"#ECCBFF",width:8},to:{color:"#ECCBFF",width:8},easing:"easeInOut",step:function(e,t){t.path.setAttribute("stroke",e.color),t.path.setAttribute("stroke-width",e.width)}}),n=t.responseJSON.averageResult;n=0<n?-n/100:0,r.animate(n)}if(""!=i&&"wp_pro_quiz_completed_quiz"==i&&d(".wpProQuiz_resultTable").length){a=decodeURIComponent(s.data).split("&");var l="";for(var o in a)if(-1!=a[o].indexOf("results")){l=void 0!==(l=a[o].split("="))[1]?l[1]:"",l=JSON.parse(l);break}void 0!==l.comp.result&&(l=l.comp.result);var c=new ProgressBar.Path("#quiz_shape_progress",{duration:3e3,from:{color:"#00A2FF",width:8},to:{color:"#7FE0FF",width:8},easing:"easeInOut",step:function(e,t){t.path.setAttribute("stroke",e.color),t.path.setAttribute("stroke-width",e.width)}});jQuery(".bb_progressbar_label").text(l+"%"),jQuery(".bb_progressbar_points").text(jQuery(".wpProQuiz_points").text()),0<l&&(l=-l/100),c.animate(l)}}})},quizUpload:function(){function e(){d("input.wpProQuiz_upload_essay[type=file]:not(.styled)").each(function(){var e=d(this),t=e.attr("id");e.addClass("styled"),e.after('<label for="'+t+'">'+bs_data.translation.choose_a_file_label+"</label>")}),d("input.wpProQuiz_upload_essay[type=file]").change(function(e){var t=d(this);t.next().html(t.val());0===t.val().length?t.next().html(bs_data.translation.choose_a_file_label):t.next().html(t.val().replace(/C:\\fakepath\\/i,""))})}e(),d(document).ajaxComplete(function(){e()})},courseViewCookie:function(){d("#bb-courses-directory-form .layout-grid-view").click(function(){d.cookie("courseview","grid")}),d("#bb-courses-directory-form .layout-list-view").click(function(){d.cookie("courseview","list")})},bbStickyLifterSidebar:function(){var e=d("#masthead").outerHeight();820<d(window).width()&&0==d(".bb-llms-sticky-sidebar .lifter-sidebar-widgets").length&&(d(".bb-llms-sticky-sidebar").stick_in_parent({offset_top:e+45}),d("body").hasClass("sticky-header")?d(".lifter-topic-sidebar-data").stick_in_parent({offset_top:e+30}):d(".lifter-topic-sidebar-data").stick_in_parent({offset_top:30})),d(window).on("resize",function(){820<d(window).width()&&0==d(".bb-llms-sticky-sidebar .lifter-sidebar-widgets").length?d(".bb-llms-sticky-sidebar").stick_in_parent({offset_top:e+45}):(d(".bb-llms-sticky-sidebar").trigger("sticky_kit:detach"),d(".lifter-topic-sidebar-data").trigger("sticky_kit:detach"))})},setElementorSpacing:function(){if(0<d(".elementor-location-header").length){var e=d(".elementor-location-header").outerHeight();d(".lifter-topic-sidebar-wrapper, #lifterlms-page-content").css({"min-height":"calc(100vh - "+e+"px)"})}},showQuizNavigation:function(){var e=d(".wpProQuiz_list").find(".wpProQuiz_listItem"),t=d("#bb-lms-quiz-navigation");if(e.length&&t.length){for(var s="<ul>",a=1;a<=e.length;a++)s+='<li><a href="#" class="bb-lms-quiz-questions" data-index="'+(a-1)+'">'+a+"</a></li>";s+="</ul>",t.html(s)}},StyleInputQuestion:function(){function e(){d(".wpProQuiz_questionInput").each(function(){d(this).hasClass("bbstyled")||d(this).addClass("bbstyled").after('<span class="input-style"></span>')})}e(),d(document).ajaxComplete(function(){e()})},singleLesson:function(){document.getElementById("learndash-page-content")&&d("#learndash-page-content").scroll(function(){d(window).trigger("resize")})},singleTopic:function(){var e=d("body.single-sfwd-topic .lms-topic-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"))},singleQuiz:function(){var e=d("body.single-sfwd-quiz .lms-quiz-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"))},collapseTrial:function(){d(".llms-access-plan-pricing.trial").each(function(e){var t=d(this).html();d(this).html(t.replace("&nbsp;",""))})},toPricingTable:function(){d(".link-to-llms-access-plans").click(function(e){e.preventDefault();var t=d("section.llms-access-plans");t.is(":visible")&&d("html, body").animate({scrollTop:d(t).position().top-50},"fast")})},dashboardNav:function(){d(document).on("click",".llms-sd-header .llms-sd-title",function(e){e.preventDefault();d(this);d(this).closest(".llms-sd-header").find("nav.llms-sd-nav").slideToggle()})},progressIndicatorRound:function(){d(".wp-block-llms-course-progress .progress__indicator").each(function(e){var t=d(this).text(),s=parseFloat(t),a=Math.round(s)+"%";d(this).text(a)})}},d(document).ready(function(){window.BBLMS.ajax_request=null,window.BBLMS.init()})}(jQuery);