/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
!function(d){"use strict";window.BBLMS={init:function(){this.toggleTheme(),this.expandQuizzes(),this.learnDashSidePanel(),this.lms_user_profile_js(),this.lms_single_course(),this.course_archive_js(),this.quizDetails(),this.quizUpload(),this.courseViewCookie(),this.bbStickyLifterSidebar(),this.StyleInputQuestion(),this.singleLesson(),this.singleTopic(),this.singleQuiz(),this.collapseTrial(),this.toPricingTable(),this.dashboardNav(),this.showMoreParticipants(),this.progressIndicatorRound(),this.switchLdGridList()},switchLdGridList:function(){var s=d("body .course-dir-list .bb-course-items:not(.is-cover)");if(window.sessionStorage){var e;if(d("body").hasClass("post-type-archive-llms_membership"))null==(e=sessionStorage.getItem("llms-membership-view"))&&(sessionStorage.setItem("llms-membership-view","grid"),e=sessionStorage.getItem("llms-membership-view"));else null==(e=sessionStorage.getItem("course-view"))&&(sessionStorage.setItem("course-view","grid"),e=sessionStorage.getItem("course-view"));d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),"grid"===e?(d(".layout-view-course.layout-grid-view").addClass("active"),s.addClass("grid-view"),s.addClass("bb-grid")):(d(".layout-view-course.layout-list-view").addClass("active"),s.addClass("list-view"),s.addClass("bb-list"))}d(document).on("click",".grid-filters .layout-view-course",function(e){e.preventDefault(),s=d("body .course-dir-list .bb-course-items:not(.is-cover)"),d(this).hasClass("layout-list-view")?(window.sessionStorage&&(d("body").hasClass("post-type-archive-llms_membership")?sessionStorage.setItem("llms-membership-view","list"):sessionStorage.setItem("course-view","list")),d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(".layout-view-course.layout-list-view").addClass("active"),s.addClass("list-view"),s.addClass("bb-list"),d("body").hasClass("post-type-archive-llms_membership")?d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_save_view&option=bb_theme_lifter_membership_grid_list&type=list",success:function(e){}}):d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_save_view&option=bb_theme_lifter_course_grid_list&type=list",success:function(e){}})):(window.sessionStorage&&(d("body").hasClass("post-type-archive-llms_membership")?sessionStorage.setItem("llms-membership-view","grid"):sessionStorage.setItem("course-view","grid")),d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(".layout-view-course.layout-grid-view").addClass("active"),s.addClass("grid-view"),s.addClass("bb-grid"),d("body").hasClass("post-type-archive-llms_membership")?d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_save_view&option=bb_theme_lifter_membership_grid_list&type=grid",success:function(e){}}):d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_save_view&option=bb_theme_lifter_course_grid_list&type=grid",success:function(e){}}))})},showMoreParticipants:function(){var s=d(".llms-course-members-list .llms-course-sidebar-heading .llms-count").text(),t=2,i=d(".llms-course-members-list #buddyboss_theme_llms_course_participants_course_id").val(),a=d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms i"),o=d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms");d(".llms-course-members-list").on("click",".bb-course-member-wrap .lme-more--llms",function(e){e.preventDefault(),d(this).hasClass("loading-members")||(d(this).addClass("loading-members"),a.removeClass("bb-icon-angle-down"),a.addClass("bb-icon-spin"),a.addClass("animate-spin"),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_llms_get_course_participants&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&total="+s+"&page="+t+"&course="+i,success:function(e){d(".llms-course-members-list .bb-course-member-wrap .course-members-list.course-members-list-extra").show(),d(".llms-course-members-list .bb-course-member-wrap .course-members-list-extra").append(e.data.html),d(window).trigger("resize"),"false"===e.data.show_more&&d(".llms-course-members-list .bb-course-member-wrap .lme-more--llms").remove(),t=e.data.page,d("html, body").animate({scrollTop:d(window).scrollTop()+150},300),a.addClass("bb-icon-angle-down"),a.removeClass("bb-icon-spin"),a.removeClass("animate-spin"),o.removeClass("loading-members")}}))})},fetchCourses:function(){for(var i=d("#bb-courses-directory-form"),e=!1,s=["filter-categories","filter-instructors","search"],t=0;t<s.length;t++){var a=BBGetUrlParameter(window.location.search,s[t]),o=i.find('[name="'+s[t]+'"]').val();if(a!==o)switch(s[t]){case"filter-categories":case"filter-instructors":!a&&"all"===o||(e=!0);break;default:e=!0}if(e)break}e&&i.find('[name="current_page"]').val(1);var r=i.serialize();if(0<bs_data.lifterlms.course_category_id)var l=bs_data.lifterlms.course_category_url;else l=bs_data.lifterlms.course_archive_url;i.hasClass("bb-elementor-widget")&&(l=i.data("current_page_url"));var n="grid";return i.find(".layout-list-view").hasClass("active")&&(n="list"),r+="&view="+n+"&request_url="+encodeURIComponent(l),d.ajax({method:"GET",url:bs_data.ajaxurl,data:r+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&course_category_url="+bs_data.lifterlms.course_category_url+"&is_course_category="+bs_data.lifterlms.is_course_category+"&course_category_id="+bs_data.lifterlms.course_category_id+"&course_category_name="+bs_data.lifterlms.course_category_name,success:function(e){var s=i.find('[name="current_page"]').val();if(isNaN(s)&&(s=1),1<s&&(l+="page/"+s+"/"),l+="?"+r,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:i.find('[name="type"]').val()},"",l),i.find(".bs-dir-list").html(e.data.html),i.find("li.selected a span").text(e.data.count),e.data.scopes)for(var t in e.data.scopes)i.find("li#courses-"+t+" a span").text(e.data.scopes[t]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},fetchMemberships:function(){for(var a=d("#bb-membership-directory-form"),e=!1,s=["filter-categories","filter-instructors","search"],t=0;t<s.length;t++){var i=BBGetUrlParameter(window.location.search,s[t]),o=a.find('[name="'+s[t]+'"]').val();if(i!==o)switch(s[t]){case"filter-categories":case"filter-instructors":!i&&"all"===o||(e=!0);break;default:e=!0}if(e)break}e&&a.find('[name="current_page"]').val(1);var r=a.serialize(),l="grid";return a.find(".layout-list-view").hasClass("active")&&(l="list"),r+="&view="+l,d.ajax({method:"GET",url:bs_data.ajaxurl,data:r+"&action=buddyboss_lms_get_memberships&_wpnonce="+bs_data.lifterlms.nonce_get_memberships,success:function(e){var s=bs_data.lifterlms.course_membership_url,t=a.find('[name="current_page"]').val();if(isNaN(t)&&(t=1),1<t&&(s+="page/"+t+"/"),s+="?"+r,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:a.find('[name="type"]').val()},"",s),a.find(".bs-dir-list").html(e.data.html),a.find("li.selected a span").text(e.data.count),e.data.scopes)for(var i in e.data.scopes)a.find("li#courses-"+i+" a span").text(e.data.scopes[i]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},fetchCoursesPagination:function(){var i=d("#bb-courses-directory-form"),a=i.serialize();if(0<bs_data.lifterlms.course_category_id)var o=bs_data.lifterlms.course_category_url;else o=bs_data.lifterlms.course_archive_url;i.hasClass("bb-elementor-widget")&&(o=i.data("current_page_url"));var e="list";return i.find(".layout-grid-view").hasClass("active")&&(e="grid"),a+="&view="+e+"&request_url="+encodeURIComponent(o),d.ajax({method:"GET",url:bs_data.ajaxurl,data:a+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.lifterlms.nonce_get_courses+"&course_category_url="+bs_data.lifterlms.course_category_url+"&is_course_category="+bs_data.lifterlms.is_course_category+"&course_category_id="+bs_data.lifterlms.course_category_id+"&course_category_name="+bs_data.lifterlms.course_category_name,success:function(e){var s=i.find('[name="current_page"]').val();if(isNaN(s)&&(s=1),1<s&&(o+="page/"+s+"/"),o+="?"+a,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:i.find('[name="type"]').val()},"",o),i.find(".bs-dir-list").html(e.data.html),i.find("li.selected a span").text(e.data.count),e.data.scopes)for(var t in e.data.scopes)i.find("li#courses-"+t+" a span").text(e.data.scopes[t]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},course_archive_js:function(){d(document).on("change","#bb-courses-directory-form input[type=checkbox]",function(e){e.preventDefault(),window.BBLMS.fetchCourses()}),window.onpopstate=function(e){if(e.state&&(!!e.state.hasOwnProperty("bblms_has_changes")&&e.state.bblms_has_changes)){var s=d("#bb-courses-directory-form");s.find(".bs-dir-list").html(e.state.courses_html),s.find('[name="type"]').val(e.state.type),s.find(".component-navigation > li").each(function(){d(this).removeClass("selected"),BBGetUrlParameter(d(this).find(" > a").attr("href"),"type")===e.state.type&&d(this).addClass("selected")})}},d(document).on("change","#bb-courses-directory-form [name='orderby'], #bb-courses-directory-form [name='filter-categories'], #bb-courses-directory-form [name='filter-instructors']",function(e){e.preventDefault(),window.BBLMS.fetchCourses()}),d(document).on("click","#bb-courses-directory-form .bs-sort-button",function(e){e.preventDefault(),e.currentTarget.classList.toggle("active"),d("#bs-courses-order-by").toggleClass("open")}),d(document).on("click","#bb-courses-directory-form .bb-lms-pagination a.page-numbers",function(e){e.preventDefault();var s=1,t=d(this).attr("href").split("/");if(0<t.length)for(var i=0;i<t.length;i++)if("page"===t[i]){s=t[i+1];break}d(this).closest("form").find('[name="current_page"]').val(s),window.BBLMS.fetchCoursesPagination()}),d(document).on("click","#bb-courses-directory-form .component-navigation a",function(e){e.preventDefault(),d(this).closest(".component-navigation").find("> li").removeClass("selected"),d(this).closest(".component-navigation").find("> li a span").hide(),d(this).closest(".component-navigation").find("> li a span").text(""),d(this).closest("li").addClass("selected").append('<i class="bb-icon-loader animate-spin"></i>'),d(this).closest("li").find("> a span").text(""),d(this).closest("li").find("> a span").show();var s=BBGetUrlParameter(d(this).attr("href"),"type");d(this).closest("form").find('[name="type"]').val(s),d(this).closest("form").find('[name="current_page"]').val(1),window.BBLMS.fetchCourses()}),document.addEventListener("click",function(e){var s=d("#course-order-dropdown"),t=e.target;if(s===t&&s.contains(t))return!1;for(var i=d("#bb-courses-directory-form .bs-dropdown"),a=d("#bb-courses-directory-form .bs-dropdown-link"),o=0;o<a.length;o++)a[o]===t||a[o].contains(t)||a[o].classList.remove("active");for(o=0;o<i.length;o++)i[o]!=t.parentElement.nextElementSibling&&i[o].classList.remove("open")}),d("#bb-membership-directory-form").on("submit",function(e){return window.BBLMS.fetchMemberships(),!1}),d("#bb-courses-directory-form").on("submit",function(e){return window.BBLMS.fetchCourses(),!1})},toggleTheme:function(){d(document).on("click","#bb-toggle-theme",function(e){e.preventDefault();var s="";d("body").hasClass("bb-dark-theme")?(d.removeCookie("bbtheme",{path:"/"}),d("body").removeClass("bb-dark-theme")):(d.cookie("bbtheme","dark",{path:"/"}),d("body").addClass("bb-dark-theme"),s="dark"),"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&toggle_theme_ajax.abort();var t={action:"buddyboss_lms_toggle_theme_color",color:s};"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&(toggle_theme_ajax=d.post(ajaxurl,t,function(e){}))})},expandQuizzes:function(){d(document).on("click",".llms-lesson-preview .ld-item-details",function(){var e=d(this).find(".ld-expand-button");e.hasClass("ld-expanded")?(e.removeClass("ld-expanded"),d(this).closest(".llms-lesson-preview").find(".quizzes_section_holder").slideUp()):(e.addClass("ld-expanded"),d(this).closest(".llms-lesson-preview").find(".quizzes_section_holder").slideDown())}),d(document).on("click",".llms-quiz-attempt-results .llms-quiz-attempt-question .llms-quiz-attempt-question-header",function(){d(this).parent().siblings(".llms-quiz-attempt-question").find(".llms-quiz-attempt-question-header").removeClass("expand-result"),d(this).hasClass("expand-result")?d(this).removeClass("expand-result"):d(this).addClass("expand-result")})},learnDashSidePanel:function(){d(document).on("click",".header-maximize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d.cookie("lessonpanel","closed",{path:"/"})}),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").removeClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").removeClass("lms-topic-sidebar-close"),d.removeCookie("lessonpanel",{path:"/"})}),d(window).width()<768&&(d("body").addClass("lms-side-panel-close"),d(".lifter-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close-sm")}),d(document).click(function(e){var s=d(".header-minimize-link");s.is(e.target)||0!==s.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})),d(window).on("resize",function(){d(window).width()<768&&d(document).click(function(e){var s=d(".header-minimize-link");s.is(e.target)||0!==s.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})})},lms_course_single_js:function(){d(document).on("click",".learndash-course-single-nav",function(e){e.preventDefault(),d("ul.learndash-course-single-main-nav").find("li.current.selected").removeClass("current").removeClass("selected");var s=d(e.currentTarget).closest("li");s.addClass("current"),s.addClass("selected");var t=d(e.currentTarget).data("tab"),i=d(".learndash-course-single-tab-content");d.each(i,function(e){var s=d(this);s.data("tab")==t?s.removeClass("hide"):s.addClass("hide")})})},lms_single_course:function(){function e(){var e=d(".bb-llms-banner").height(),s=d(".bb-thumbnail-preview .bb-preview-course-link-wrap");if(s.length)var t=s.height();else t=0;var i=e/2+t/2;820<d(window).width()&&d(".bb-single-course-sidebar.bb-preview-wrap").css({"margin-top":"-"+i+"px"})}function s(){var e=d("#main").width();d(".bb-llms-banner .bb-course-banner-info.container").width(e)}d(".bb-course-video-overlay").magnificPopup({fixedBgPos:!0,fixedContentPos:!0,items:{src:".bb_course_video_details",type:"inline"},callbacks:{open:function(){d.magnificPopup.instance.close=function(){d(".mfp-container .mfp-content .bb_course_video_details video".length)&&(d("video").trigger("pause"),d.magnificPopup.proto.close.call(this))}}}}),e(),s(),d(window).on("resize",function(){s(),e()}),d(".bb-toggle-panel").on("click",function(e){e.preventDefault(),setTimeout(function(){s()},300),setTimeout(function(){s()},600)})},lms_user_profile_js:function(){d(document).on("click",".bb-lms-user-profile-tab",function(e){e.preventDefault(),d("ul.bb-lms-user-profile-tabs").find("li.current.selected").removeClass("current").removeClass("selected");var s=d(e.currentTarget).closest("li");s.addClass("current"),s.addClass("selected");var t=d(e.currentTarget).data("tab"),i=d(".bb-lms-user-profile-tab-content");d.each(i,function(e){var s=d(this);s.data("tab")==t?s.removeClass("hide"):s.addClass("hide")})})},quizDetails:function(){if(d("#bb-lms-quiz-id").length){var e=d("#bb-lms-quiz-id").val();d("div.quiz_progress_container").insertBefore(d(".wpProQuiz_results .wpProQuiz_resultTable")),d("#wpProQuiz_"+e).on("learndash-quiz-init",function(){})}},ajaxCompleteProcess:function(){d(document).ajaxComplete(function(e,s,t){if(t.data&&""!=t.data){var i=t.data.split("&"),a="";for(var o in i)if(-1!=i[o].indexOf("action")){a=void 0!==(a=i[o].split("="))[1]?a[1]:"";break}if(""!=a&&"wp_pro_quiz_load_quiz_data"==a&&d(".wpProQuiz_resultTable").length){d(".bb_avg_progress").show();var r=new ProgressBar.Path("#bb_avg_shape",{duration:3e3,from:{color:"#ECCBFF",width:8},to:{color:"#ECCBFF",width:8},easing:"easeInOut",step:function(e,s){s.path.setAttribute("stroke",e.color),s.path.setAttribute("stroke-width",e.width)}}),l=s.responseJSON.averageResult;l=0<l?-l/100:0,r.animate(l)}if(""!=a&&"wp_pro_quiz_completed_quiz"==a&&d(".wpProQuiz_resultTable").length){i=decodeURIComponent(t.data).split("&");var n="";for(var o in i)if(-1!=i[o].indexOf("results")){n=void 0!==(n=i[o].split("="))[1]?n[1]:"",n=JSON.parse(n);break}void 0!==n.comp.result&&(n=n.comp.result);var c=new ProgressBar.Path("#quiz_shape_progress",{duration:3e3,from:{color:"#00A2FF",width:8},to:{color:"#7FE0FF",width:8},easing:"easeInOut",step:function(e,s){s.path.setAttribute("stroke",e.color),s.path.setAttribute("stroke-width",e.width)}});jQuery(".bb_progressbar_label").text(n+"%"),jQuery(".bb_progressbar_points").text(jQuery(".wpProQuiz_points").text()),0<n&&(n=-n/100),c.animate(n)}}})},quizUpload:function(){function e(){d("input.wpProQuiz_upload_essay[type=file]:not(.styled)").each(function(){var e=d(this),s=e.attr("id");e.addClass("styled"),e.after('<label for="'+s+'">'+bs_data.translation.choose_a_file_label+"</label>")}),d("input.wpProQuiz_upload_essay[type=file]").change(function(e){var s=d(this);s.next().html(s.val());0===s.val().length?s.next().html(bs_data.translation.choose_a_file_label):s.next().html(s.val().replace(/C:\\fakepath\\/i,""))})}e(),d(document).ajaxComplete(function(){e()})},courseViewCookie:function(){d("#bb-courses-directory-form .layout-grid-view").click(function(){d.cookie("courseview","grid")}),d("#bb-courses-directory-form .layout-list-view").click(function(){d.cookie("courseview","list")})},bbStickyLifterSidebar:function(){var e=d("#masthead").outerHeight();820<d(window).width()&&0==d(".bb-llms-sticky-sidebar .lifter-sidebar-widgets").length&&(d(".bb-llms-sticky-sidebar").stick_in_parent({offset_top:e+45}),d("body").hasClass("sticky-header")?d(".lifter-topic-sidebar-data").stick_in_parent({offset_top:e+30}):d(".lifter-topic-sidebar-data").stick_in_parent({offset_top:30})),d(window).on("resize",function(){820<d(window).width()&&0==d(".bb-llms-sticky-sidebar .lifter-sidebar-widgets").length?d(".bb-llms-sticky-sidebar").stick_in_parent({offset_top:e+45}):(d(".bb-llms-sticky-sidebar").trigger("sticky_kit:detach"),d(".lifter-topic-sidebar-data").trigger("sticky_kit:detach"))})},setElementorSpacing:function(){if(0<d(".elementor-location-header").length){var e=d(".elementor-location-header").outerHeight();d(".lifter-topic-sidebar-wrapper, #lifterlms-page-content").css({"min-height":"calc(100vh - "+e+"px)"})}},showQuizNavigation:function(){var e=d(".wpProQuiz_list").find(".wpProQuiz_listItem"),s=d("#bb-lms-quiz-navigation");if(e.length&&s.length){for(var t="<ul>",i=1;i<=e.length;i++)t+='<li><a href="#" class="bb-lms-quiz-questions" data-index="'+(i-1)+'">'+i+"</a></li>";t+="</ul>",s.html(t)}},StyleInputQuestion:function(){function e(){d(".wpProQuiz_questionInput").each(function(){d(this).hasClass("bbstyled")||d(this).addClass("bbstyled").after('<span class="input-style"></span>')})}e(),d(document).ajaxComplete(function(){e()})},singleLesson:function(){document.getElementById("learndash-page-content")&&d("#learndash-page-content").scroll(function(){d(window).trigger("resize")})},singleTopic:function(){var e=d("body.single-sfwd-topic .lms-topic-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"))},singleQuiz:function(){var e=d("body.single-sfwd-quiz .lms-quiz-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"))},collapseTrial:function(){d(".llms-access-plan-pricing.trial").each(function(e){var s=d(this).html();d(this).html(s.replace("&nbsp;",""))})},toPricingTable:function(){d(".link-to-llms-access-plans").click(function(e){e.preventDefault();var s=d("section.llms-access-plans");s.is(":visible")&&d("html, body").animate({scrollTop:d(s).position().top-50},"fast")})},dashboardNav:function(){d(document).on("click",".llms-sd-header .llms-sd-title",function(e){e.preventDefault();d(this);d(this).closest(".llms-sd-header").find("nav.llms-sd-nav").slideToggle()})},progressIndicatorRound:function(){d(".wp-block-llms-course-progress .progress__indicator").each(function(e){var s=d(this).text(),t=parseFloat(s),i=Math.round(t)+"%";d(this).text(i)})}},d(document).ready(function(){window.BBLMS.init()})}(jQuery);