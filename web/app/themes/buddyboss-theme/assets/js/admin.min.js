/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
!function(r){"use strict";window.BuddyBossThemeAdmin={fileId:null,fileUrl:null,fileFrame:[],selectors:{uploadBtnClass:"buddyboss-upload-btn",clearBtnClass:"buddyboss-upload-clear-btn",uploadBtn:".buddyboss-upload-btn",clearBtn:".buddyboss-upload-clear-btn"},init:function(){var t=this;r(document).on("click",".add-repeater-row",function(e){e.preventDefault();var t=r(e.target).data("template-id"),a=r(".buddyboss-field-repeater").find(".repeater-block").length+1,l=jQuery("#"+t).html();l=l.replace(new RegExp("__counter__","g"),a),r(".buddyboss-field-repeater").append(l)}),r(document).on("click",".buddyboss-repeater-tool-btn",function(e){var t=r(e.target);e.preventDefault(),t.hasClass("close-repeater-row")?(t.closest(".repeater-block").removeClass("block-visible"),t.closest(".repeater-block").find(".repeater-content-bottom").hide()):t.hasClass("toggle-repeater-row")?(t.closest(".repeater-block").addClass("block-visible"),t.closest(".repeater-block").find(".repeater-content-bottom").show()):t.hasClass("remove-repeater-row")&&confirm(t.data("confirm"))&&t.closest(".repeater-block").remove()}),r(document).on("click",t.selectors.uploadBtn,function(e){e.preventDefault(),t.setFields(r(this)),t.uploadFile(r(this))}),r(document).on("click",t.selectors.clearBtn,function(e){e.preventDefault(),t.setFields(r(this)),r(t.fileUrl).val(""),r(t.fileId).val(""),t.replaceButtonClass(r(this))})},setFields:function(e){var t=this;t.fileUrl=r(e).prev(),t.fileId=r(t.fileUrl).prev()},setUploadParams:function(e,t){this.fileFrame[t].uploader.uploader.param("uploadeType",e),this.fileFrame[t].uploader.uploader.param("uploadeTypecaller","buddyboss-admin-upload")},replaceButtonClass:function(e){this.hasValue()?r(e).removeClass(this.selectors.uploadBtnClass).addClass(this.selectors.clearBtnClass):r(e).removeClass(this.selectors.clearBtnClass).addClass(this.selectors.uploadBtnClass),this.setLabels(e)},hasValue:function(){return""!==r(this.fileUrl).val()},setLabels:function(e){this.hasValue()?e.val(e.data("remove_text")):e.val(e.data("upload_text"))},uploadFile:function(t){var a=this,e=r(t),l=e.attr("data-mime_type")||"",s=e.attr("data-ext")||!1,o=e.attr("id");if(void 0!==a.fileFrame[o])return s&&a.setUploadParams(s,o),void a.fileFrame[o].open();a.fileFrame[o]=wp.media({library:{type:l.split(",")},title:e.data("box_title"),button:{text:e.data("box_action")},multiple:!1}),a.fileFrame[o].on("select",function(){var e=a.fileFrame[o].state().get("selection").first().toJSON();r(a.fileId).val(e.id),r(a.fileUrl).val(e.url),a.replaceButtonClass(t)}),a.fileFrame[o].open(),s&&a.setUploadParams(s,o)}},r(document).on("ready",function(){BuddyBossThemeAdmin.init()})}(jQuery);