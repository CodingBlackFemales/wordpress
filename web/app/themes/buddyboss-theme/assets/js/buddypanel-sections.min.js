/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
!function(C){"use strict";window.BuddyPanelSections={init:function(){if(void 0!==window.wpNavMenu){var s=0,a="",o="";C(document).on("click","#buddypanel-menu .button-controls #submit-buddypanel-section-menu",function(){var e=C("#menu").val(),t=C("#menu-settings-column-nonce").val(),n=window.wpNavMenu.addMenuItemToBottom,i={action:"add-menu-item",menu:e,"menu-settings-column-nonce":t,"menu-item":{"-1":{"menu-item-object-id":Math.floor(1e16*Math.random()),"menu-item-object":"custom","menu-item-patent-id":0,"menu-item-type":"custom","menu-item-description":"bb-theme-section","menu-item-title":wp.i18n.__("Get Started")}}};C("#buddypanel-menu").find(".button-controls .spinner").addClass("is-active"),C.post(ajaxurl,i,function(e){var t=C("#menu-instructions");C("#buddypanel-menu").find(".button-controls .spinner").removeClass("is-active"),e=(e=e||"").toString().trim(),n(e,i),C("li.pending").hide().fadeIn("slow"),C(".drag-instructions").show(),!t.hasClass("menu-instructions-inactive")&&t.siblings().length&&t.addClass("menu-instructions-inactive")})}),C("#menu-to-edit").on("sortstart",function(e,t){a=t.item.children(".menu-item-transport")}),C("#menu-to-edit").on("sortstop",function(e,t){var n=t.item,i=n.menuItemDepth();0<C(n).prev(".menu-item-section").length&&0<s&&(o=a.children().insertAfter(t.item)),setTimeout(function(){0<C(n).prev(".menu-item-section").length&&0<s&&(n.updateDepthClass(0),window.BuddyPanelSections.bb_shiftDepthClass(1,o,i),n.updateParentMenuItemDBId(),window.wpNavMenu.refreshKeyboardAccessibility(),window.wpNavMenu.refreshAdvancedAccessibility()),C(n).hasClass("menu-item-section")&&0<s&&(n.find(".item-title .is-submenu").hide(),n.find("input.menu-item-data-parent-id").val(0),n.updateDepthClass(0),window.wpNavMenu.menuList.sortable("cancel")),!(C(n).hasClass("menu-item-section")&&0<C(n).prev().length&&0<C(n).next().length)||C(n).prev().hasClass("menu-item-depth-0")&&C(n).next().hasClass("menu-item-depth-0")||(n.find(".item-title .is-submenu").hide(),n.find("input.menu-item-data-parent-id").val(0),n.updateDepthClass(0),window.wpNavMenu.menuList.sortable("cancel"))})}),C("#menu-to-edit").on("sort",function(e,t){var n=t.helper.offset(),i=window.wpNavMenu.menuList.offset().left,a=window.wpNavMenu.isRTL?n.left+t.helper.width():n.left;s=window.wpNavMenu.negateIfRTL*window.wpNavMenu.pxToDepth(a-i)}),C("#menu-to-edit").on("click","a.item-edit",function(){var e=jQuery(this).closest(".menu-item-section");0<e.length&&(e.find(".field-url").css("display","none"),e.find(".field-icon").css("display","none"),!1===C("#locations-mobile-menu-logged-in").length&&C("#locations-mobile-menu-logged-in").prop("checked")&&!1===C("#locations-mobile-menu-logged-out").length&&C("#locations-mobile-menu-logged-out").prop("checked")&&e.find(".field-stick_to_bottom").css("display","none"),e.find(".field-description").css("display","none"),e.find(".field-description textarea").attr("readonly","readonly"))}),C(".menu-theme-locations input").on("change",function(){0===C(".menu-theme-locations .menu-settings-input input:checked").length||C("#locations-header-menu").prop("checked")||C("#locations-header-menu-logout").prop("checked")||C("#locations-header-my-account").prop("checked")?(C("#buddypanel-menu p.warning").show(),C("#buddypanel-menu p.button-controls").hide()):(C("#buddypanel-menu p.warning").hide(),C("#buddypanel-menu p.button-controls").show())}),window.wpNavMenu.moveMenuItem=function(e,t){var n,i,a,s=C("#menu-to-edit li"),o=s.length,u=e.parents("li.menu-item"),d=u.childMenuItems(),m=u.getItemData(),r=parseInt(u.menuItemDepth(),10),l=parseInt(u.index(),10),c=u.next(),p=c.childMenuItems(),h=parseInt(c.menuItemDepth(),10)+1,f=u.prev(),w=parseInt(f.menuItemDepth(),10),b=f.getItemData()["menu-item-db-id"],v=menus["moved"+t.charAt(0).toUpperCase()+t.slice(1)];switch(t){case"up":if(i=l-1,u.hasClass("menu-item-section")){if(0===l)break;var g=u.prevAll(".menu-item-depth-0:first"),I=parseInt(g.index(),10);u.detach().insertBefore(s.eq(I)).updateParentMenuItemDBId()}else{if(0===l)break;if(0==i&&0!==r&&u.moveHorizontally(0,r),0!==w&&u.moveHorizontally(w,r),f.prev().hasClass("menu-item-section")){var y=parseInt(f.prev().menuItemDepth(),10);u.moveHorizontally(y,r)}d?(n=u.add(d)).detach().insertBefore(s.eq(i)).updateParentMenuItemDBId():u.detach().insertBefore(s.eq(i)).updateParentMenuItemDBId()}break;case"down":if(u.hasClass("menu-item-section")){if(o===l+1)break;var M=l+1;p&&0<p.length&&(M+=p.length),u.moveHorizontally(0,0),u.detach().insertAfter(s.eq(M)).updateParentMenuItemDBId()}else if(d){if(n=u.add(d),(p=0!==(c=s.eq(n.length+l)).childMenuItems().length)&&(a=parseInt(c.menuItemDepth(),10)+1,u.moveHorizontally(a,r)),c.hasClass("menu-item-section")){var k=parseInt(c.menuItemDepth(),10);u.moveHorizontally(k,r)}if(o===l+n.length)break;n.detach().insertAfter(s.eq(l+n.length)).updateParentMenuItemDBId()}else{if(0!==p.length&&u.moveHorizontally(h,r),o===l+1)break;u.detach().insertAfter(s.eq(l+1)).updateParentMenuItemDBId()}break;case"top":if(0===l)break;d?(n=u.add(d)).detach().insertBefore(s.eq(0)).updateParentMenuItemDBId():u.detach().insertBefore(s.eq(0)).updateParentMenuItemDBId();break;case"left":if(u.hasClass("menu-item-section")||f.hasClass("menu-item-section")){if(0===r)break;u.shiftHorizontally(-r)}else{if(0===r)break;u.shiftHorizontally(-1)}break;case"right":if(u.hasClass("menu-item-section")||f.hasClass("menu-item-section")){if(0===l)break;if(m["menu-item-parent-id"]===b)break;u.shiftHorizontally(-r)}else{if(0===l)break;if(m["menu-item-parent-id"]===b)break;u.shiftHorizontally(1)}}e.trigger("focus"),window.wpNavMenu.registerChange(),window.wpNavMenu.refreshKeyboardAccessibility(),window.wpNavMenu.refreshAdvancedAccessibility(),v&&wp.a11y.speak(v)}}},bb_shiftDepthClass:function(e,t,i){return t.each(function(){var e=C(this),t=e.menuItemDepth(),n=t-i;e.removeClass("menu-item-depth-"+t).addClass("menu-item-depth-"+n),0==n&&e.find(".is-submenu").hide()})}},window.BuddyPanelSections.init()}(jQuery);