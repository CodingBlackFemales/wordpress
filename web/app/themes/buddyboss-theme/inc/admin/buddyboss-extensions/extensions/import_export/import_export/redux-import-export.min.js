!function(r){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.import_export=redux.field_objects.import_export||{},redux.field_objects.import_export.copy_text=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.textContent=e,t.select(),document.execCommand("copy"),t.remove()},redux.field_objects.import_export.get_options=function(e){var t=r("#redux-export-code-copy"),e=ajaxurl+"?download=0&action=redux_download_options-"+redux.optName.args.opt_name+"&secret="+e;t.addClass("disabled").attr("disabled","disabled"),t.text(t.data("copy")),r.get(e,function(e){redux.field_objects.import_export.copy_text(e),t.removeClass("disabled"),t.text(t.data("copied")),setTimeout(function(){t.text(t.data("copy")).removeClass("disabled").removeAttr("disabled")},2e3)})},redux.field_objects.import_export.init=function(e){e=r.redux.getSelector(e,"import_export"),r(e).each(function(){var e,t,o=r(this),i=o;o.hasClass("redux-field-container")||(i=o.parents(".redux-field-container:first")),i.is(":hidden")||i.hasClass("redux-field-init")&&(i.removeClass("redux-field-init"),o.each(function(){r("#redux-import").click(function(e){if(""===r("#import-code-value").val()&&""===r("#import-link-value").val())return e.preventDefault(),!1}),r(this).find("#redux-import-code-button").click(function(){var e=r("#redux-import-code-wrapper");r("#redux-import-link-wrapper").is(":visible")?(r("#import-link-value").val(""),r("#redux-import-link-wrapper").fadeOut("fast",function(){e.fadeIn("fast",function(){r("#import-code-value").focus()})})):e.is(":visible")?e.fadeOut():e.fadeIn("medium",function(){r("#import-code-value").focus()})}),r(this).find("#redux-import-upload").on("click",function(){r("#redux-import-upload-file").click()}),document.getElementById("redux-import-upload-file").addEventListener("change",function(){var e=document.getElementById("redux-import-upload-file").files[0],t=new FileReader;r("#redux-import-upload span").text(": "+e.name),t.onload=function(){var e=t.result;r("#import-code-value").val(e)},t.readAsText(e)}),r(this).find("#redux-export-code-copy").on("click",function(e){var t=r("#redux-export-code"),o=r(this).data("secret");e.preventDefault(),window.onbeforeunload?confirm(ImportExport.unchanged_values)&&(r("#redux_top_save").click(),setTimeout(function(){redux.field_objects.import_export.get_options(o,t)},2e3)):redux.field_objects.import_export.get_options(o,t)}),r(this).find("textarea").on("focusout",function(){var e=r(this).attr("id"),t=r(this),o=t;"import-link-value"!==e&&"import-code-value"!==e||(o=r(this).parent()),o.fadeOut("medium",function(){"redux-export-link-value"!==e&&t.text("")})}),(e=document.getElementById("redux-export-code")).onfocus=function(){e.select(),e.onmouseup=function(){return e.onmouseup=null,!1}},(t=document.getElementById("import-code-value")).onfocus=function(){t.select(),t.onmouseup=function(){return t.onmouseup=null,!1}}}))})}}(jQuery);