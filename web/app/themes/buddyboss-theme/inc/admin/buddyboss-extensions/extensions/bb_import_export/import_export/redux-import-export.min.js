!function(e){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.import_export=redux.field_objects.import_export||{},redux.field_objects.import_export.copy_text=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.textContent=e,t.select(),document.execCommand("copy"),t.remove()},redux.field_objects.import_export.get_options=function(t){var o=e("#redux-export-code-copy"),i=ajaxurl+"?download=0&action=redux_download_options-"+redux.optName.args.opt_name+"&secret="+t;o.addClass("disabled").attr("disabled","disabled"),o.text(o.data("copy")),e.get(i,function(e){redux.field_objects.import_export.copy_text(e),o.removeClass("disabled"),o.text(o.data("copied")),setTimeout(function(){o.text(o.data("copy")).removeClass("disabled").prop("disabled",!1)},2e3)})},redux.field_objects.import_export.init=function(t){t=e.redux.getSelector(t,"import_export"),e(t).each(function(){var t,o,i=e(this),n=i;if(i.hasClass("redux-field-container")||(n=i.parents(".redux-field-container:first")),!n.is(":hidden"))n.hasClass("redux-field-init")&&(n.removeClass("redux-field-init"),i.each(function(){e("#redux-import").on("click",function(t){if(""===e("#import-code-value").val()&&""===e("#import-link-value").val())return t.preventDefault(),!1}),e(this).find("#redux-import-code-button").on("click",function(){var t=e("#redux-import-code-wrapper");t.is(":visible")?(e("#import-link-value").val(""),e("#redux-import-link-wrapper").fadeOut("fast",function(){t.fadeIn("fast",function(){e("#import-code-value").trigger("focus")})})):t.is(":visible")?t.fadeOut():t.fadeIn("medium",function(){e("#import-code-value").trigger("focus")})}),e(this).find("#redux-import-upload").on("click",function(){e("#redux-import-upload-file").trigger("click")}),document.getElementById("redux-import-upload-file").addEventListener("change",function(){var t=document.getElementById("redux-import-upload-file").files[0],o=new FileReader;e("#redux-import-upload span").text(": "+t.name),o.onload=function(){var t=o.result;e("#import-code-value").val(t)},o.readAsText(t)}),e(this).find("#redux-export-code-copy").on("click",function(t){var o=e("#redux-export-code"),i=e(this).data("secret");t.preventDefault(),window.onbeforeunload?confirm(ImportExport.unchanged_values)&&(e("#redux_top_save").trigger("click"),setTimeout(function(){redux.field_objects.import_export.get_options(i,o)},2e3)):redux.field_objects.import_export.get_options(i,o)}),e(this).find("textarea").on("focusout",function(){var t=e(this).attr("id"),o=e(this),i=o;("import-link-value"===t||"import-code-value"===t)&&(i=e(this).parent()),i.fadeOut("medium",function(){"redux-export-link-value"!==t&&o.text("")})}),(t=document.getElementById("redux-export-code")).onfocus=function(){t.select(),t.onmouseup=function(){return t.onmouseup=null,!1}},(o=document.getElementById("import-code-value")).onfocus=function(){o.select(),o.onmouseup=function(){return o.onmouseup=null,!1}}}))})}}(jQuery);